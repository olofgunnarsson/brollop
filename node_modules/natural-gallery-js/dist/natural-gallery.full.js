(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('NaturalGallery',[],t):'object'==typeof exports?exports.NaturalGallery=t():e.NaturalGallery=t()})(this,function(){var t=Math.round,e=Math.floor;return function(e){function t(i){if(n[i])return n[i].exports;var l=n[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=2)}([function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n;(function(e){e.getIcon=function(e){var t=document.createElementNS('http://www.w3.org/2000/svg','svg');return t.setAttribute('viewBox','0 0 100 100'),t.innerHTML='<use xlink:href="#'+e+'"></use>',t},e.toggleClass=function(e,t){e&&t&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},e.removeClass=function(e,t){var n=new RegExp('(\\s|^)'+t+'(\\s|$)');e.className=e.className.replace(n,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')},e.addClass=function(e,t){this.hasClass(t)||(e.className+=(e.className?' ':'')+t)},e.hasClass=function(e,t){return e.className&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(e.className)},e.uniqBy=function(e,t){var n=[];return e.forEach(function(e){var i=n.some(function(n){return e[t]===n[t]});i||n.push(e)}),n},e.differenceBy=function(e,t,n){var i=[];return e.forEach(function(e){var l=t.some(function(t){return e[n]===t[n]});l||i.push(e)}),i},e.intersectionBy=function(e,t,n){var i=[];return e.forEach(function(e){var l=t.some(function(t){return e[n]===t[n]});l&&i.push(e)}),i};var t=[{base:'A',letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:'AA',letters:/[\uA732]/g},{base:'AE',letters:/[\u00C6\u01FC\u01E2]/g},{base:'AO',letters:/[\uA734]/g},{base:'AU',letters:/[\uA736]/g},{base:'AV',letters:/[\uA738\uA73A]/g},{base:'AY',letters:/[\uA73C]/g},{base:'B',letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:'C',letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:'D',letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:'DZ',letters:/[\u01F1\u01C4]/g},{base:'Dz',letters:/[\u01F2\u01C5]/g},{base:'E',letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:'F',letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:'G',letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:'H',letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:'I',letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:'J',letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:'K',letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:'L',letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:'LJ',letters:/[\u01C7]/g},{base:'Lj',letters:/[\u01C8]/g},{base:'M',letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:'N',letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:'NJ',letters:/[\u01CA]/g},{base:'Nj',letters:/[\u01CB]/g},{base:'O',letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:'OI',letters:/[\u01A2]/g},{base:'OO',letters:/[\uA74E]/g},{base:'OU',letters:/[\u0222]/g},{base:'P',letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:'Q',letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:'R',letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:'S',letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:'T',letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:'TZ',letters:/[\uA728]/g},{base:'U',letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:'V',letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:'VY',letters:/[\uA760]/g},{base:'W',letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:'X',letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:'Y',letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:'Z',letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:'a',letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:'aa',letters:/[\uA733]/g},{base:'ae',letters:/[\u00E6\u01FD\u01E3]/g},{base:'ao',letters:/[\uA735]/g},{base:'au',letters:/[\uA737]/g},{base:'av',letters:/[\uA739\uA73B]/g},{base:'ay',letters:/[\uA73D]/g},{base:'b',letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:'c',letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:'d',letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:'dz',letters:/[\u01F3\u01C6]/g},{base:'e',letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:'f',letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:'g',letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:'h',letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:'hv',letters:/[\u0195]/g},{base:'i',letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:'j',letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:'k',letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:'l',letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:'lj',letters:/[\u01C9]/g},{base:'m',letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:'n',letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:'nj',letters:/[\u01CC]/g},{base:'o',letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:'oi',letters:/[\u01A3]/g},{base:'ou',letters:/[\u0223]/g},{base:'oo',letters:/[\uA74F]/g},{base:'p',letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:'q',letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:'r',letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:'s',letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:'t',letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:'tz',letters:/[\uA729]/g},{base:'u',letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:'v',letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:'vy',letters:/[\uA761]/g},{base:'w',letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:'x',letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:'y',letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:'z',letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.removeDiacritics=function(e){for(var n=0;n<t.length;n++)e=e.replace(t[n].letters,t[n].base);return e}})(n=t.Utility||(t.Utility={}))},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e){this.header=e,this._collection=null}return e.prototype.isActive=function(){return null!==this.collection},Object.defineProperty(e.prototype,'collection',{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),e}();t.AbstractFilter=n},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),n(3),n(4);var i=n(5);t.Gallery=i.Gallery},function(){},function(){},function(t,n,i){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var l=i(6),o=i(9),a=i(10),r=i(11),s=i(0),d=i(13),p=function(){function t(t,n,i,l){for(var d in void 0===l&&(l=null),this._options={rowHeight:350,format:'natural',round:3,margin:3,limit:0,showLabels:'hover',lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1,labelCategories:'Category',labelNone:'None',labelOthers:'Others',labelSearch:'Search',labelImages:'Images',selectable:!1},this._events={},this.old_scroll_top=0,this._pswpContainer=[],this._collection=[],this._categories=[],this._selected=[],this.pswpElement=n,this.options)'undefined'==typeof i.options[d]&&(i.options[d]=this.options[d]);this.options=i.options,this.categories=i.categories?i.categories:[],this.rootElement=t,s.Utility.addClass(this.rootElement,'natural-gallery'),this._events=i.events?i.events:{},this._events.select&&(this.options.selectable=!0),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new o.Header(this),this.options.searchFilter&&this.header.addFilter(new a.SearchFilter(this.header)),this.options.categoriesFilter&&this.header.addFilter(new r.CategoryFilter(this.header))),this.render(),this.bodyWidth=e(this.bodyElement.getBoundingClientRect().width),i.images&&(this.collection=i.images),0===this.options.limit&&this.bindScroll(null===l?document:l)}return t.prototype.render=function(){var t=this,e=document.createElement('div');s.Utility.addClass(e,'natural-gallery-noresults'),e.appendChild(s.Utility.getIcon('icon-noresults'));var n=document.createElement('div');s.Utility.addClass(n,'natural-gallery-next'),n.appendChild(s.Utility.getIcon('icon-next')),n.addEventListener('click',function(n){n.preventDefault(),t.addElements()});var i=document.createElement('iframe');this.rootElement.appendChild(i);var l=null;i.contentWindow.addEventListener('resize',function(){clearTimeout(l),l=setTimeout(function(){t.resize()},100)}),this.bodyElement=document.createElement('div'),s.Utility.addClass(this.bodyElement,'natural-gallery-body'),this.bodyElement.appendChild(e),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(n)},t.prototype.appendItems=function(e){var t=!1;0===this.collection.length&&(t=!0),e.forEach(function(e){this._collection.push(new l.Item(e,this))},this),d.Organizer.organize(this),this.header&&this.header.refresh(),t&&this.addElements()},t.prototype.style=function(){this.collection.forEach(function(e){e.style()})},t.prototype.addElements=function(e){void 0===e&&(e=null);var t=this.collection,n=this.rootElement.getElementsByClassName('natural-gallery-next')[0];if(n&&(n.style.display='block'),this.pswpContainer.length===t.length)return n.style.display='none',void(0===t.length&&(this.rootElement.getElementsByClassName('natural-gallery-noresults')[0].style.display='block',this.rootElement.getElementsByClassName('natural-gallery-images')[0].style.display='none'));e||(e=this.getRowsPerPage(this));for(var l,o=this.pswpContainer.length,a=this.pswpContainer.length?t[o].row+e:e,r=o;r<t.length;r++)l=t[r],l.row<a&&(this.pswpContainer.push(l.getPswpItem()),this.bodyElement.appendChild(l.loadElement()),l.bindClick(),l.flash()),this.pswpContainer.length===t.length&&(n.style.display='none');var i=this.rootElement.getElementsByClassName('natural-gallery-noresults')[0];i&&(i.style.display='none');var s=this.rootElement.getElementsByClassName('natural-gallery-images')[0];s&&(s.style.display='block');var d=this.rootElement.getElementsByClassName('natural-gallery-visible')[0];d&&(d.textContent=this.pswpContainer.length+'');var p=this.rootElement.getElementsByClassName('natural-gallery-total')[0];p&&(p.textContent=t.length+'')},t.prototype.getRowsPerPage=function(t){if(this.options.limit)return this.options.limit;var n=window.innerHeight,i=n-t.bodyElement.offsetTop,l=e(i/(0.7*this.options.rowHeight));return l<this.options.minRowsAtStart?this.options.minRowsAtStart:l},t.prototype.resize=function(){var t=e(this.bodyElement.getBoundingClientRect().width);if(t!==this.bodyWidth){this.bodyWidth=t,d.Organizer.organize(this);var n=this.collection[this.pswpContainer.length-1],i=n?n.row+1:null;this.reset(),this.addElements(i)}},t.prototype.refresh=function(){this.reset(),d.Organizer.organize(this),this.addElements()},t.prototype.reset=function(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()});var e=this.rootElement.getElementsByClassName('natural-gallery-noresults')[0];e&&(e.style.display='none')},t.prototype.bindScroll=function(e){var t=this,n=null;n=e instanceof Document?e.documentElement:e,e.addEventListener('scroll',function(){var e=t.rootElement.offsetTop+t.rootElement.offsetHeight,i=n.scrollTop-(n.clientTop||0),l=n.clientHeight,o=i-t.old_scroll_top;t.old_scroll_top=i,0<o&&i+l>=e&&t.addElements(1)})},t.prototype.select=function(e){var t=this._selected.indexOf(e);-1===t&&(this._selected.push(e),this._events.select(this._selected.map(function(e){return e.fields})))},t.prototype.unselect=function(e){var t=this._selected.indexOf(e);-1<t&&(this._selected.splice(t,1),this._events.select(this._selected.map(function(e){return e.fields})))},t.prototype.unselectAll=function(){for(var e=this._selected.length-1;0<=e;e--)this._selected[e].toggleSelect();this._selected=[]},Object.defineProperty(t.prototype,'images',{set:function(e){this.collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'id',{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'pswpContainer',{get:function(){return this._pswpContainer},set:function(e){this._pswpContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'collection',{get:function(){return this.header&&this.header.isFiltered()?this.header.collection:this._collection},set:function(e){this.reset(),this._collection=[],this.appendItems(e)},enumerable:!0,configurable:!0}),t.prototype.getOriginalCollection=function(){return this._collection},Object.defineProperty(t.prototype,'bodyWidth',{get:function(){return this._bodyWidth},set:function(e){this._bodyWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'bodyElement',{get:function(){return this._bodyElement},set:function(e){this._bodyElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'rootElement',{get:function(){return this._rootElement},set:function(e){this._rootElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'pswpApi',{get:function(){return this._pswpApi},set:function(e){this._pswpApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'pswpElement',{get:function(){return this._pswpElement},set:function(e){this._pswpElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'options',{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'header',{get:function(){return this._header},set:function(e){this._header=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'categories',{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),t}();n.Gallery=p},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=n(0),l=n(7),o=n(8),a=function(){function e(e,t){this.gallery=t,this._binded=!1,this.selected=!1,this._fields=e,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}return e.prototype.getTitle=function(e){return e.title?this.getTitleDetails(e.title).title:null},e.prototype.getLink=function(e){return e.link?e.link:this.getTitleDetails(e.title).link},e.prototype.getLinkTarget=function(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget},e.prototype.getTitleDetails=function(e){var t=document.createElement('div');t.innerHTML=e;var n=t.getElementsByTagName('a'),i={title:t.textContent,link:null,linkTarget:null};return n[0]&&(i.link=n[0].getAttribute('href'),i.linkTarget=n[0].getAttribute('target')),i},e.prototype.createElement=function(){var e=this,t=this.gallery.options,n=null;this.title&&-1<['true','hover'].indexOf(t.showLabels)&&(n=!0);var l=document.createElement('div'),o=document.createElement('div'),a=this.getLinkElement();if(t.lightbox&&n&&a?(n=a,i.Utility.addClass(n,'button'),i.Utility.addClass(o,'zoomable')):t.lightbox&&n&&!a?(n=document.createElement('div'),i.Utility.addClass(l,'zoomable')):t.lightbox&&!n?i.Utility.addClass(l,'zoomable'):!t.lightbox&&n&&a?(l=a,n=document.createElement('div'),n.classList.add('button')):t.lightbox||!n||a?!t.lightbox&&!n&&a&&(l=a):n=document.createElement('div'),i.Utility.addClass(o,'image'),i.Utility.addClass(l,'figure loading visible'),o.style.backgroundImage='url('+this.thumbnail+')',l.appendChild(o),t.round){var r=t.round+'px';l.style.borderRadius=r,o.style.borderRadius=r}this.element=l,this.image=o,n&&(n.textContent=this.title,i.Utility.addClass(n,'title'),'hover'===t.showLabels&&i.Utility.addClass(n,'hover'),l.appendChild(n)),this.gallery.options.selectable&&(this.selectBtn=document.createElement('div'),this.selectBtn.appendChild(i.Utility.getIcon('icon-select')),this.selectBtn.classList.add('selectBtn'),this.selectBtn.addEventListener('click',function(){e.toggleSelect()}),this.element.appendChild(this.selectBtn))},e.prototype.toggleSelect=function(){this.selected=!this.selected,this.selected?(this.element.classList.add('selected'),this.gallery.select(this)):(this.element.classList.remove('selected'),this.gallery.unselect(this))},e.prototype.getLinkElement=function(){var e=this,t=null;return this.link&&(t=document.createElement('a'),this.gallery.events.link?t.addEventListener('click',function(t){e.gallery.events.link.preventDefault&&t.preventDefault(),e.gallery.events.link.callback(e._fields)}):(t.setAttribute('href',this.link),i.Utility.addClass(t,'link'),this.linkTarget&&t.setAttribute('target',this.linkTarget))),t},e.prototype.style=function(){i.Utility.removeClass(this.element,'visible'),this.element.style.width=this.width+'px',this.element.style.height=this.height+'px',this.element.style.marginRight=this.gallery.options.margin+'px',this.element.style.marginBottom=this.gallery.options.margin+'px',this.last&&(this.element.style.marginRight='0');var e=this;window.setTimeout(function(){i.Utility.addClass(e.element,'visible')},0)},e.prototype.flash=function(){var e=this;i.Utility.removeClass(this.element,'visible'),window.setTimeout(function(){i.Utility.addClass(e.element,'visible')},0)},e.prototype.bindClick=function(){if(this.gallery.options.lightbox){var t=this;if(!this.binded){this.binded=!0;var e=function(n){t.openPhotoSwipe.call(t,n,t.element)},n=null;n=this.link?this.image:this.element,n.addEventListener('click',e)}}},e.prototype.openPhotoSwipe=function(t,e){t.preventDefault();var n=this;if(this.gallery.options.lightbox){var i=Array.prototype.slice.call(e.parentNode.children),a=i.indexOf(e)-1,r=new l(this.gallery.pswpElement,o,this.gallery.pswpContainer,{index:a,bgOpacity:0.85,showHideOpacity:!0,loop:!1});this.gallery.pswpApi=r,r.init();var s=null;r.listen('beforeChange',function(e){0<e&&r.getCurrentIndex()===r.items.length-1?n.gallery.addElements():e===-1*(r.items.length-1)&&(s=r.items.length,n.gallery.addElements())}),r.listen('afterChange',function(){s&&(r.goTo(s),s=null)})}},e.prototype.getPswpItem=function(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}},e.prototype.getElement=function(){return this.element},e.prototype.loadElement=function(){var e=this,t=document.createElement('img');return t.setAttribute('src',this.thumbnail),t.addEventListener('load',function(){i.Utility.removeClass(e.element,'loading'),i.Utility.addClass(e.element,'loaded')}),t.addEventListener('error',function(){i.Utility.addClass(e.element,'errored')}),this.element},e.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},Object.defineProperty(e.prototype,'id',{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'thumbnail',{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'enlarged',{get:function(){return this._enlarged},set:function(e){this._enlarged=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'title',{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'tWidth',{get:function(){return this._tWidth},set:function(e){this._tWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'tHeight',{get:function(){return this._tHeight},set:function(e){this._tHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'eWidth',{get:function(){return this._eWidth},set:function(e){this._eWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'eHeight',{get:function(){return this._eHeight},set:function(e){this._eHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'last',{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'categories',{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'row',{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'height',{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'width',{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'description',{get:function(){return this._description},set:function(e){this._description=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'binded',{get:function(){return this._binded},set:function(e){this._binded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'link',{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'linkTarget',{get:function(){return this._linkTarget},set:function(e){this._linkTarget=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'fields',{get:function(){return this._fields},enumerable:!0,configurable:!0}),e}();t.Item=a},function(e,n,i){var l,o;(function(t,a){l=a,o='function'==typeof l?l.call(n,i,n,e):l,!(o!==void 0&&(e.exports=o))})(this,function(){'use strict';return function(e,n,i,l){var o=Math.min,a=Math.abs,r=Math.max,s=Math.PI,d={features:null,bind:function(e,t,n,l){var o=(l?'remove':'add')+'EventListener';t=t.split(' ');for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||'div');return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,n){d.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp('(\\s|^)'+t+'(\\s|$)');e.className=e.className.replace(n,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')},addClass:function(e,t){d.hasClass(e,t)||(e.className+=(e.className?' ':'')+t)},hasClass:function(e,t){return e.className&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(d.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var l=e.length;l--;)if(e[l][n]===t)return l;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(s/2))},inOut:function(e){return-(Math.cos(s*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(d.features)return d.features;var e=d.createEl(),t=e.style,n='',l={};if(l.oldIE=document.all&&!document.addEventListener,l.touch='ontouchstart'in window,window.requestAnimationFrame&&(l.raf=window.requestAnimationFrame,l.caf=window.cancelAnimationFrame),l.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!l.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var s=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);s&&0<s.length&&(s=parseInt(s[1],10),1<=s&&8>s&&(l.isOldIOSPhone=!0))}var p=o.match(/Android\s([0-9\.]*)/),c=p?p[1]:0;c=parseFloat(c),1<=c&&(4.4>c&&(l.isOldAndroid=!0),l.androidVersion=c),l.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var m,u,g=['transform','perspective','animationName'],y=['','webkit','Moz','ms','O'],h=0;4>h;h++){n=y[h];for(var i=0;3>i;i++)m=g[i],u=n+(n?m.charAt(0).toUpperCase()+m.slice(1):m),!l[m]&&u in t&&(l[m]=u);n&&!l.raf&&(n=n.toLowerCase(),l.raf=window[n+'RequestAnimationFrame'],l.raf&&(l.caf=window[n+'CancelAnimationFrame']||window[n+'CancelRequestAnimationFrame']))}if(!l.raf){var a=0;l.raf=function(e){var t=new Date().getTime(),n=r(0,16-(t-a)),i=window.setTimeout(function(){e(t+n)},n);return a=t+n,i},l.caf=function(e){clearTimeout(e)}}return l.svg=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect,d.features=l,l}};d.detectFeatures(),d.features.oldIE&&(d.bind=function(e,t,n,l){t=t.split(' ');for(var o,a=(l?'detach':'attach')+'Event',r=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s],o)if('object'==typeof n&&n.handleEvent){if(!l)n['oldIE'+o]=r;else if(!n['oldIE'+o])return!1;e[a]('on'+o,n['oldIE'+o])}else e[a]('on'+o,n)});var c=this,m=25,u=3,g={allowPanToNext:!0,spacing:0.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(e){return'A'===e.tagName},getDoubleTapZoom:function(e,t){return e?1:0.7>t.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:'fit'};d.extend(g,l);var y,h,f,b,w,x,C,_,v,E,I,k,T,P,S,O,A,D,F,R,L,U,z,N,Z,M,B,H,W,K,q,G,Y,V,X,j,$,J,Q,ee,te,ne,ie,le,oe,ae,re,se,de,pe,ce,me,ue,ge,ye,he,fe,be=function(){return{x:0,y:0}},xe=be(),we=be(),Ce=be(),_e={},ve=0,Ee={},Ie=be(),ke=0,Te=!0,Pe=[],Se={},Oe=!1,Ae=function(e,t){d.extend(c,t.publicMethods),Pe.push(e)},De=function(e){var t=on();if(e>t-1)return e-t;return 0>e?t+e:e},Fe={},Re=function(e,t){return Fe[e]||(Fe[e]=[]),Fe[e].push(t)},Le=function(e){var t=Fe[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var l=0;l<t.length;l++)t[l].apply(c,n)}},Ue=function(){return new Date().getTime()},ze=function(e){ye=e,c.bg.style.opacity=e*g.bgOpacity},Ne=function(e,t,n,i,l){(!Oe||l&&l!==c.currItem)&&(i/=l?l.fitRatio:c.currItem.fitRatio),e[U]=k+t+'px, '+n+'px'+T+' scale('+i+')'},Ze=function(e){pe&&(e&&(E>c.currItem.fitRatio?!Oe&&(fn(c.currItem,!1,!0),Oe=!0):Oe&&(fn(c.currItem),Oe=!1)),Ne(pe,Ce.x,Ce.y,E))},Me=function(e){e.container&&Ne(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Be=function(e,t){t[U]=k+e+'px, 0px'+T},He=function(e,n){if(!g.loop&&n){var i=b+(Ie.x*ve-e)/Ie.x,l=t(e-vt.x);(0>i&&0<l||i>=on()-1&&0>l)&&(e=vt.x+l*g.mainScrollEndFriction)}vt.x=e,Be(e,w)},We=function(e,t){var n=Et[e]-Ee[e];return we[e]+xe[e]+n-n*(t/I)},Ke=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},qe=function(e){e.x=t(e.x),e.y=t(e.y)},Ge=null,Ye=function(){Ge&&(d.unbind(document,'mousemove',Ye),d.addClass(e,'pswp--has_mouse'),g.mouseUsed=!0,Le('mouseUsed')),Ge=setTimeout(function(){Ge=null},100)},Ve=function(){d.bind(document,'keydown',c),q.transform&&d.bind(c.scrollWrap,'click',c),g.mouseUsed||d.bind(document,'mousemove',Ye),d.bind(window,'resize scroll orientationchange',c),Le('bindEvents')},Xe=function(){d.unbind(window,'resize scroll orientationchange',c),d.unbind(window,'scroll',v.scroll),d.unbind(document,'keydown',c),d.unbind(document,'mousemove',Ye),q.transform&&d.unbind(c.scrollWrap,'click',c),Q&&d.unbind(window,C,c),clearTimeout(G),Le('unbindEvents')},je=function(e,t){var n=un(c.currItem,_e,e);return t&&(de=n),n},$e=function(e){return e||(e=c.currItem),e.initialZoomLevel},Je=function(e){return e||(e=c.currItem),0<e.w?g.maxSpreadZoom:1},Qe=function(e,t,n,i){return i===c.currItem.initialZoomLevel?(n[e]=c.currItem.initialPosition[e],!0):(n[e]=We(e,i),n[e]>t.min[e])?(n[e]=t.min[e],!0):!!(n[e]<t.max[e])&&(n[e]=t.max[e],!0)},et=function(){if(U){var t=q.perspective&&!N;return k='translate'+(t?'3d(':'('),void(T=q.perspective?', 0px)':')')}U='left',d.addClass(e,'pswp--ie'),Be=function(e,t){t.left=e+'px'},Me=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,l=t*e.h;n.width=i+'px',n.height=l+'px',n.left=e.initialPosition.x+'px',n.top=e.initialPosition.y+'px'},Ze=function(){if(pe){var e=pe,t=c.currItem,n=1<t.fitRatio?1:t.fitRatio,i=n*t.w,l=n*t.h;e.width=i+'px',e.height=l+'px',e.left=Ce.x+'px',e.top=Ce.y+'px'}}},tt=function(t){var e='';g.escKey&&27===t.keyCode?e='close':g.arrowKeys&&(37===t.keyCode?e='prev':39===t.keyCode&&(e='next')),!e||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,c[e]())},nt=function(t){!t||(ne||te||ce||$)&&(t.preventDefault(),t.stopPropagation())},it=function(){c.setScrollOffset(0,d.getScrollY())},lt={},ot=0,at=function(e){lt[e]&&(lt[e].raf&&M(lt[e].raf),ot--,delete lt[e])},rt=function(e){lt[e]&&at(e),lt[e]||(ot++,lt[e]={})},st=function(){for(var e in lt)lt.hasOwnProperty(e)&&at(e)},dt=function(e,n,i,l,o,a,r){var s,t=Ue();rt(e);var d=function(){if(lt[e]){if(s=Ue()-t,s>=l)return at(e),a(i),void(r&&r());a((i-n)*o(s/l)+n),lt[e].raf=Z(d)}};d()},pt=30,ct=10,mt={},p={},ut={},gt={},yt={},ht=[],ft={},bt=[],xt={},wt=0,Ct=be(),_t=0,vt=be(),Et=be(),It=be(),kt=function(e,t){return e.x===t.x&&e.y===t.y},Tt=function(e,t){return a(e.x-t.x)<m&&a(e.y-t.y)<m},Pt=function(e,t){return xt.x=a(e.x-t.x),xt.y=a(e.y-t.y),Math.sqrt(xt.x*xt.x+xt.y*xt.y)},St=function(){ie&&(M(ie),ie=null)},Ot=function(){Q&&(ie=Z(Ot),Gt())},At=function(){return'fit'!==g.scaleMode||E!==c.currItem.initialZoomLevel},Dt=function(e,t){return e&&e!==document&&(e.getAttribute('class')&&-1<e.getAttribute('class').indexOf('pswp__scroll-wrap')?!1:t(e)?e:Dt(e.parentNode,t))},Ft={},Rt=function(t,e){return Ft.prevent=!Dt(t.target,g.isClickableElement),Le('preventDragEvent',t,e,Ft),Ft.prevent},Lt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ut=function(e,t,n){n.x=0.5*(e.x+t.x),n.y=0.5*(e.y+t.y)},zt=function(e,t,n){if(50<e-V){var i=2<bt.length?bt.shift():{};i.x=t,i.y=n,bt.push(i),V=e}},Nt=function(){var e=Ce.y-c.currItem.initialPosition.y;return 1-a(e/(_e.y/2))},Zt={},Mt={},Bt=[],Ht=function(t){for(;0<Bt.length;)Bt.pop();return z?(fe=0,ht.forEach(function(e){0===fe?Bt[0]=e:1===fe&&(Bt[1]=e),fe++})):-1<t.type.indexOf('touch')?t.touches&&0<t.touches.length&&(Bt[0]=Lt(t.touches[0],Zt),1<t.touches.length&&(Bt[1]=Lt(t.touches[1],Mt))):(Zt.x=t.pageX,Zt.y=t.pageY,Zt.id='',Bt[0]=Zt),Bt},Wt=function(e,t){var n,i,l,o,a=0,r=Ce[e]+t[e],s=0<t[e],d=vt.x+t.x,p=vt.x-ft.x;return n=r>de.min[e]||r<de.max[e]?g.panEndFriction:1,r=Ce[e]+t[e]*n,(g.allowPanToNext||E===c.currItem.initialZoomLevel)&&(pe?'h'===me&&'x'===e&&!te&&(s?(r>de.min[e]&&(n=g.panEndFriction,a=de.min[e]-r,i=de.min[e]-we[e]),(0>=i||0>p)&&1<on()?(o=d,0>p&&d>ft.x&&(o=ft.x)):de.min.x!==de.max.x&&(l=r)):(r<de.max[e]&&(n=g.panEndFriction,a=r-de.max[e],i=we[e]-de.max[e]),(0>=i||0<p)&&1<on()?(o=d,0<p&&d<ft.x&&(o=ft.x)):de.min.x!==de.max.x&&(l=r))):o=d,'x'===e)?(void 0!==o&&(He(o,!0),le=o!==ft.x),de.min.x!==de.max.x&&(void 0===l?!le&&(Ce.x+=t.x*n):Ce.x=l),void 0!==o):void(!ce&&!le&&E>c.currItem.fitRatio&&(Ce[e]+=t[e]*n))},Kt=function(t){if(!('mousedown'===t.type&&0<t.button)){if(nn)return void t.preventDefault();if(!(J&&'mousedown'===t.type)){if(Rt(t,!0)&&t.preventDefault(),Le('pointerDown'),z){var e=d.arraySearch(ht,t.pointerId,'id');0>e&&(e=ht.length),ht[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var n=Ht(t),i=n.length;oe=null,st(),Q&&1!==i||(Q=ue=!0,d.bind(window,C,c),j=he=ge=$=le=ne=ee=te=!1,me=null,Le('firstTouchStart',n),Ke(we,Ce),xe.x=xe.y=0,Ke(gt,n[0]),Ke(yt,gt),ft.x=Ie.x*ve,bt=[{x:gt.x,y:gt.y}],V=Y=Ue(),je(E,!0),St(),Ot()),ae||!(1<i)||ce||le||(I=E,te=!1,ae=ee=!0,xe.y=xe.x=0,Ke(we,Ce),Ke(mt,n[0]),Ke(p,n[1]),Ut(mt,p,It),Et.x=a(It.x)-Ce.x,Et.y=a(It.y)-Ce.y,re=se=Pt(mt,p))}}},qt=function(t){if(t.preventDefault(),z){var e=d.arraySearch(ht,t.pointerId,'id');if(-1<e){var n=ht[e];n.x=t.pageX,n.y=t.pageY}}if(Q){var i=Ht(t);if(me||ne||ae)oe=i;else if(vt.x!==Ie.x*ve)me='h';else{var l=a(i[0].x-gt.x)-a(i[0].y-gt.y);a(l)>=ct&&(me=0<l?'h':'v',oe=i)}}},Gt=function(){if(oe){var e=oe.length;if(0!==e)if(Ke(mt,oe[0]),ut.x=mt.x-gt.x,ut.y=mt.y-gt.y,ae&&1<e){if(gt.x=mt.x,gt.y=mt.y,!ut.x&&!ut.y&&kt(oe[1],p))return;Ke(p,oe[1]),te||(te=!0,Le('zoomGestureStarted'));var t=Pt(mt,p),n=$t(t);n>c.currItem.initialZoomLevel+c.currItem.initialZoomLevel/15&&(he=!0);var i=1,l=$e(),o=Je();if(!(n<l))n>o&&(i=(n-o)/(6*l),1<i&&(i=1),n=o+i*l);else if(g.pinchToClose&&!he&&I<=c.currItem.initialZoomLevel){var r=l-n,s=1-r/(l/1.2);ze(s),Le('onPinchClose',s),ge=!0}else i=(l-n)/l,1<i&&(i=1),n=l-i*(l/3);0>i&&(i=0),re=t,Ut(mt,p,Ct),xe.x+=Ct.x-It.x,xe.y+=Ct.y-It.y,Ke(It,Ct),Ce.x=We('x',n),Ce.y=We('y',n),j=n>E,E=n,Ze()}else{if(!me)return;if(ue&&(ue=!1,a(ut.x)>=ct&&(ut.x-=oe[0].x-yt.x),a(ut.y)>=ct&&(ut.y-=oe[0].y-yt.y)),gt.x=mt.x,gt.y=mt.y,0===ut.x&&0===ut.y)return;if('v'===me&&g.closeOnVerticalDrag&&!At()){xe.y+=ut.y,Ce.y+=ut.y;var d=Nt();return $=!0,Le('onVerticalDrag',d),ze(d),void Ze()}zt(Ue(),mt.x,mt.y),ne=!0,de=c.currItem.bounds;var m=Wt('x',ut);m||(Wt('y',ut),qe(Ce),Ze())}}},Yt=function(t){if(q.isOldAndroid){if(J&&'mouseup'===t.type)return;-1<t.type.indexOf('touch')&&(clearTimeout(J),J=setTimeout(function(){J=0},600))}Le('pointerUp'),Rt(t,!1)&&t.preventDefault();var e;if(z){var n=d.arraySearch(ht,t.pointerId,'id');if(-1<n)if(e=ht.splice(n,1)[0],navigator.pointerEnabled)e.type=t.pointerType||'mouse';else{e.type={2:'touch',3:'pen',4:'mouse'}[t.pointerType],e.type||(e.type=t.pointerType||'mouse')}}var i,l=Ht(t),o=l.length;if('mouseup'===t.type&&(o=0),2===o)return oe=null,!0;1===o&&Ke(yt,l[0]),0!==o||me||ce||(!e&&('mouseup'===t.type?e={x:t.pageX,y:t.pageY,type:'mouse'}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:'touch'})),Le('touchRelease',t,e));var a=-1;if(0===o&&(Q=!1,d.unbind(window,C,c),St(),ae?a=0:-1!=_t&&(a=Ue()-_t)),_t=1===o?Ue():-1,i=-1!=a&&150>a?'zoom':'swipe',ae&&2>o&&(ae=!1,1===o&&(i='zoomPointerUp'),Le('zoomGestureEnded')),oe=null,ne||te||ce||$){if(st(),X||(X=Vt()),X.calculateSwipeSpeed('x'),$){var r=Nt();if(r<g.verticalDragRange)c.close();else{var s=Ce.y,p=ye;dt('verticalDrag',0,1,300,d.easing.cubic.out,function(e){Ce.y=(c.currItem.initialPosition.y-s)*e+s,ze((1-p)*e+p),Ze()}),Le('onVerticalDrag',1)}return}if((le||ce)&&0===o){var m=jt(i,X);if(m)return;i='zoomPointerUp'}return ce?void 0:'swipe'===i?void(!le&&E>c.currItem.fitRatio&&Xt(X)):void Jt()}},Vt=function(){var e,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(t){1<bt.length?(e=Ue()-V+50,n=bt[bt.length-2][t]):(e=Ue()-Y,n=yt[t]),i.lastFlickOffset[t]=gt[t]-n,i.lastFlickDist[t]=a(i.lastFlickOffset[t]),i.lastFlickSpeed[t]=20<i.lastFlickDist[t]?i.lastFlickOffset[t]/e:0,0.1>a(i.lastFlickSpeed[t])&&(i.lastFlickSpeed[t]=0),i.slowDownRatio[t]=0.95,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatio[t]=1},calculateOverBoundsAnimOffset:function(e,t){i.backAnimStarted[e]||(Ce[e]>de.min[e]?i.backAnimDestination[e]=de.min[e]:Ce[e]<de.max[e]&&(i.backAnimDestination[e]=de.max[e]),i.backAnimDestination[e]!==void 0&&(i.slowDownRatio[e]=0.7,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],0.05>i.speedDecelerationRatioAbs[e]&&(i.lastFlickSpeed[e]=0,i.backAnimStarted[e]=!0,dt('bounceZoomPan'+e,Ce[e],i.backAnimDestination[e],t||300,d.easing.sine.out,function(t){Ce[e]=t,Ze()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]*=i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10,i.speedDecelerationRatioAbs[e]=a(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,Ce[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(lt.zoomPan&&(lt.zoomPan.raf=Z(i.panAnimLoop),i.now=Ue(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset('x'),i.calculateAnimOffset('y'),Ze(),i.calculateOverBoundsAnimOffset('x'),i.calculateOverBoundsAnimOffset('y'),0.05>i.speedDecelerationRatioAbs.x&&0.05>i.speedDecelerationRatioAbs.y))return Ce.x=t(Ce.x),Ce.y=t(Ce.y),Ze(),void at('zoomPan')}};return i},Xt=function(e){return e.calculateSwipeSpeed('y'),de=c.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},0.05>=a(e.lastFlickSpeed.x)&&0.05>=a(e.lastFlickSpeed.y)?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset('x'),e.calculateOverBoundsAnimOffset('y'),!0):void(rt('zoomPan'),e.lastNow=Ue(),e.panAnimLoop())},jt=function(e,t){var n;ce||(wt=b);var i;if('swipe'===e){var l=gt.x-yt.x,s=10>t.lastFlickDist.x;l>pt&&(s||20<t.lastFlickOffset.x)?i=-1:l<-pt&&(s||-20>t.lastFlickOffset.x)&&(i=1)}var p;i&&(b+=i,0>b?(b=g.loop?on()-1:0,p=!0):b>=on()&&(b=g.loop?0:on()-1,p=!0),(!p||g.loop)&&(ke+=i,ve-=i,n=!0));var m,u=Ie.x*ve,y=a(u-vt.x);return n||u>vt.x==0<t.lastFlickSpeed.x?(m=0<a(t.lastFlickSpeed.x)?y/a(t.lastFlickSpeed.x):333,m=o(m,400),m=r(m,250)):m=333,wt===b&&(n=!1),ce=!0,Le('mainScrollAnimStart'),dt('mainScroll',vt.x,u,m,d.easing.cubic.out,He,function(){st(),ce=!1,wt=-1,(n||wt!==b)&&c.updateCurrItem(),Le('mainScrollAnimComplete')}),n&&c.updateCurrItem(!0),n},$t=function(e){return 1/se*e*I},Jt=function(){var e=E,t=$e(),n=Je();E<t?e=t:E>n&&(e=n);var i,l=ye;return ge&&!j&&!he&&E<t?(c.close(),!0):(ge&&(i=function(e){ze((1-l)*e+l)}),c.zoomTo(e,0,200,d.easing.cubic.out,i),!0)};Ae('Gestures',{publicMethods:{initGestures:function(){var e=function(e,t,n,i,l){D=e+t,F=e+n,R=e+i,L=l?e+l:''};z=q.pointerEvent,z&&q.touch&&(q.touch=!1),z?navigator.pointerEnabled?e('pointer','down','move','up','cancel'):e('MSPointer','Down','Move','Up','Cancel'):q.touch?(e('touch','start','move','end','cancel'),N=!0):e('mouse','down','move','up'),C=F+' '+R+' '+L,_=D,z&&!N&&(N=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),c.likelyTouchDevice=N,v[D]=Kt,v[F]=qt,v[R]=Yt,L&&(v[L]=v[R]),q.touch&&(_+=' mousedown',C+=' mousemove mouseup',v.mousedown=v[D],v.mousemove=v[F],v.mouseup=v[R]),N||(g.allowPanToNext=!1)}}});var Qt,en,tn,nn,ln,on,an,rn=function(t,n,i,l){Qt&&clearTimeout(Qt),nn=!0,tn=!0;var o;t.initialLayout?(o=t.initialLayout,t.initialLayout=null):o=g.getThumbBoundsFn&&g.getThumbBoundsFn(b);var a=i?g.hideAnimationDuration:g.showAnimationDuration,r=function(){at('initialZoom'),i?(c.template.removeAttribute('style'),c.bg.removeAttribute('style')):(ze(1),n&&(n.style.display='block'),d.addClass(e,'pswp--animated-in'),Le('initialZoom'+(i?'OutEnd':'InEnd'))),l&&l(),nn=!1};if(!a||!o||void 0===o.x)return Le('initialZoom'+(i?'Out':'In')),E=t.initialZoomLevel,Ke(Ce,t.initialPosition),Ze(),e.style.opacity=i?0:1,ze(1),void(a?setTimeout(function(){r()},a):r());(function(){var n=f,l=!c.currItem.src||c.currItem.loadError||g.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility='hidden'),i||(E=o.w/t.w,Ce.x=o.x,Ce.y=o.y-H,c[l?'template':'bg'].style.opacity=1e-3,Ze()),rt('initialZoom'),i&&!n&&d.removeClass(e,'pswp--animated-in'),l&&(i?d[(n?'remove':'add')+'Class'](e,'pswp--animate_opacity'):setTimeout(function(){d.addClass(e,'pswp--animate_opacity')},30)),Qt=setTimeout(function(){if(Le('initialZoom'+(i?'Out':'In')),!i)E=t.initialZoomLevel,Ke(Ce,t.initialPosition),Ze(),ze(1),l?e.style.opacity=1:ze(1),Qt=setTimeout(r,a+20);else{var s=o.w/t.w,p={x:Ce.x,y:Ce.y},c=E,m=ye,u=function(t){1===t?(E=s,Ce.x=o.x,Ce.y=o.y-K):(E=(s-c)*t+c,Ce.x=(o.x-p.x)*t+p.x,Ce.y=(o.y-K-p.y)*t+p.y),Ze(),l?e.style.opacity=1-t:ze(m-t*m)};n?dt('initialZoom',0,1,a,d.easing.cubic.out,u,r):(u(1),Qt=setTimeout(r,a+20))}},i?25:90)})()},sn={},dn=[],pn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return en.length}},cn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},mn=function(e,n,i){var l=e.bounds;l.center.x=t((sn.x-n)/2),l.center.y=t((sn.y-i)/2)+e.vGap.top,l.max.x=n>sn.x?t(sn.x-n):l.center.x,l.max.y=i>sn.y?t(sn.y-i)+e.vGap.top:l.center.y,l.min.x=n>sn.x?0:l.center.x,l.min.y=i>sn.y?e.vGap.top:l.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(!e.vGap&&(e.vGap={top:0,bottom:0}),Le('parseVerticalMargin',e)),sn.x=t.x,sn.y=t.y-e.vGap.top-e.vGap.bottom,i){var l=sn.x/e.w,o=sn.y/e.h;e.fitRatio=l<o?l:o;var a=g.scaleMode;'orig'===a?n=1:'fit'===a&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=cn())}return n?(mn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=cn(),e.initialPosition=e.bounds.center,e.bounds},gn=function(e,t,n,i,l,o){t.loadError||i&&(t.imageAppended=!0,fn(t,i,t===c.currItem&&Oe),n.appendChild(i),o&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display='none',t.placeholder=null)},500))},yn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=d.createEl('pswp__img','img'),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},hn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=''),e.container.innerHTML=g.errorMsg.replace('%url%',e.src),!0},fn=function(e,n,i){if(e.src){n||(n=e.container.lastChild);var l=i?e.w:t(e.w*e.fitRatio),o=i?e.h:t(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=l+'px',e.placeholder.style.height=o+'px'),n.style.width=l+'px',n.style.height=o+'px'}},bn=function(){if(dn.length){for(var e,t=0;t<dn.length;t++)e=dn[t],e.holder.index===e.index&&gn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);dn=[]}};Ae('Controller',{publicMethods:{lazyLoadItem:function(e){e=De(e);var t=ln(e);t&&(!t.loaded&&!t.loading||S)&&(Le('gettingData',e,t),t.src&&yn(t))},initController:function(){d.extend(g,pn,!0),c.items=en=i,ln=c.getItemAt,on=g.getNumItemsFn,an=g.loop,3>on()&&(g.loop=!1),Re('beforeChange',function(e){var t,n=g.preload,i=!(null!==e)||0<=e,l=o(n[0],on()),a=o(n[1],on());for(t=1;t<=(i?a:l);t++)c.lazyLoadItem(b+t);for(t=1;t<=(i?l:a);t++)c.lazyLoadItem(b-t)}),Re('initialLayout',function(){c.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(b)}),Re('mainScrollAnimComplete',bn),Re('initialZoomInEnd',bn),Re('destroy',function(){for(var e,t=0;t<en.length;t++)e=en[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);dn=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==en[e]&&en[e]},allowProgressiveImg:function(){return g.forceProgressiveLoading||!N||g.mouseUsed||1200<screen.width},setContent:function(e,t){g.loop&&(t=De(t));var n=c.getItemAt(e.index);n&&(n.container=null);var i,l=c.getItemAt(t);if(!l)return void(e.el.innerHTML='');Le('gettingData',t,l),e.index=t,e.item=l;var o=l.container=d.createEl('pswp__zoom-wrap');if(!l.src&&l.html&&(l.html.tagName?o.appendChild(l.html):o.innerHTML=l.html),hn(l),un(l,_e),l.src&&!l.loadError&&!l.loaded){if(l.loadComplete=function(n){if(y){if(e&&e.index===t){if(hn(n,!0))return n.loadComplete=n.img=null,un(n,_e),Me(n),void(e.index===b&&c.updateCurrZoomItem());n.imageAppended?!nn&&n.placeholder&&(n.placeholder.style.display='none',n.placeholder=null):q.transform&&(ce||nn)?dn.push({item:n,baseDiv:o,img:n.img,index:t,holder:e,clearPlaceholder:!0}):gn(t,n,o,n.img,ce||nn,!0)}n.loadComplete=null,n.img=null,Le('imageLoadComplete',t,n)}},d.features.transform){var a='pswp__img pswp__img--placeholder';a+=l.msrc?'':' pswp__img--placeholder--blank';var r=d.createEl(a,l.msrc?'img':'');l.msrc&&(r.src=l.msrc),fn(l,r),o.appendChild(r),l.placeholder=r}l.loading||yn(l),c.allowProgressiveImg()&&(!tn&&q.transform?dn.push({item:l,baseDiv:o,img:l.img,index:t,holder:e}):gn(t,l,o,l.img,!0,!0))}else l.src&&!l.loadError&&(i=d.createEl('pswp__img','img'),i.style.opacity=1,i.src=l.src,fn(l,i),gn(t,l,o,i,!0));tn||t!==b?Me(l):(pe=o.style,rn(l,i||l.img)),e.el.innerHTML='',e.el.appendChild(o)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var xn,wn={},Cn=function(t,n,i){var l=document.createEvent('CustomEvent'),e={origEvent:t,target:t.target,releasePoint:n,pointerType:i||'touch'};l.initCustomEvent('pswpTap',!0,!0,e),t.target.dispatchEvent(l)};Ae('Tap',{publicMethods:{initTap:function(){Re('firstTouchStart',c.onTapStart),Re('touchRelease',c.onTapRelease),Re('destroy',function(){wn={},xn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(xn),xn=null)},onTapRelease:function(t,e){if(e&&!ne&&!ee&&!ot){var n=e;if(xn&&(clearTimeout(xn),xn=null,Tt(n,wn)))return void Le('doubleTap',n);if('mouse'===e.type)return void Cn(t,e,'mouse');var i=t.target.tagName.toUpperCase();if('BUTTON'===i||d.hasClass(t.target,'pswp__single-tap'))return void Cn(t,e);Ke(wn,n),xn=setTimeout(function(){Cn(t,e),xn=null},300)}}}});var _n;Ae('DesktopZoom',{publicMethods:{initDesktopZoom:function(){W||(N?Re('mouseUsed',function(){c.setupDesktopZoom()}):c.setupDesktopZoom(!0))},setupDesktopZoom:function(t){_n={};var n='wheel mousewheel DOMMouseScroll';Re('bindEvents',function(){d.bind(e,n,c.handleMouseWheel)}),Re('unbindEvents',function(){_n&&d.unbind(e,n,c.handleMouseWheel)}),c.mouseZoomedIn=!1;var i,l=function(){c.mouseZoomedIn&&(d.removeClass(e,'pswp--zoomed-in'),c.mouseZoomedIn=!1),1>E?d.addClass(e,'pswp--zoom-allowed'):d.removeClass(e,'pswp--zoom-allowed'),o()},o=function(){i&&(d.removeClass(e,'pswp--dragging'),i=!1)};Re('resize',l),Re('afterChange',l),Re('pointerDown',function(){c.mouseZoomedIn&&(i=!0,d.addClass(e,'pswp--dragging'))}),Re('pointerUp',o),t||l()},handleMouseWheel:function(t){if(E<=c.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||ot||Q?t.preventDefault():U&&2<a(t.deltaY)&&(f=!0,c.close())),!0;if(t.stopPropagation(),_n.x=0,'deltaX'in t)1===t.deltaMode?(_n.x=18*t.deltaX,_n.y=18*t.deltaY):(_n.x=t.deltaX,_n.y=t.deltaY);else if('wheelDelta'in t)t.wheelDeltaX&&(_n.x=-0.16*t.wheelDeltaX),_n.y=t.wheelDeltaY?-0.16*t.wheelDeltaY:-0.16*t.wheelDelta;else if('detail'in t)_n.y=t.detail;else return;je(E,!0);var e=Ce.x-_n.x,n=Ce.y-_n.y;(g.modal||e<=de.min.x&&e>=de.max.x&&n<=de.min.y&&n>=de.max.y)&&t.preventDefault(),c.panTo(e,n)},toggleDesktopZoom:function(t){t=t||{x:_e.x/2+Ee.x,y:_e.y/2+Ee.y};var n=g.getDoubleTapZoom(!0,c.currItem),i=E===n;c.mouseZoomedIn=!i,c.zoomTo(i?c.currItem.initialZoomLevel:n,t,333),d[(i?'remove':'add')+'Class'](e,'pswp--zoomed-in')}}});var vn,En,In,kn,Tn,Pn,Sn,On,An,Dn,Fn,Rn,Ln={history:!0,galleryUID:1},Un=function(){return Fn.hash.substring(1)},zn=function(){vn&&clearTimeout(vn),In&&clearTimeout(In)},Nn=function(){var e=Un(),t={};if(5>e.length)return t;var n,i=e.split('&');for(n=0;n<i.length;n++)if(i[n]){var l=i[n].split('=');2>l.length||(t[l[0]]=l[1])}if(g.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<en.length;n++)if(en[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return 0>t.pid&&(t.pid=0),t},Zn=function(){if(In&&clearTimeout(In),ot||Q)return void(In=setTimeout(Zn,500));kn?clearTimeout(En):kn=!0;var e=b+1,t=ln(b);t.hasOwnProperty('pid')&&(e=t.pid);var n=Sn+'&gid='+g.galleryUID+'&pid='+e;On||-1!==Fn.hash.indexOf(n)||(Dn=!0);var i=Fn.href.split('#')[0]+'#'+n;Rn?'#'+n!==window.location.hash&&history[On?'replaceState':'pushState']('',document.title,i):On?Fn.replace(i):Fn.hash=n,On=!0,En=setTimeout(function(){kn=!1},60)};Ae('History',{publicMethods:{initHistory:function(){if(d.extend(g,Ln,!0),!!g.history){Fn=window.location,Dn=!1,An=!1,On=!1,Sn=Un(),Rn='pushState'in history,-1<Sn.indexOf('gid=')&&(Sn=Sn.split('&gid=')[0],Sn=Sn.split('?gid=')[0]),Re('afterChange',c.updateURL),Re('unbindEvents',function(){d.unbind(window,'hashchange',c.onHashChange)});var e=function(){Pn=!0,An||(Dn?history.back():Sn?Fn.hash=Sn:Rn?history.pushState('',document.title,Fn.pathname+Fn.search):Fn.hash=''),zn()};Re('unbindEvents',function(){f&&e()}),Re('destroy',function(){Pn||e()}),Re('firstUpdate',function(){b=Nn().pid});var t=Sn.indexOf('pid=');-1<t&&(Sn=Sn.substring(0,t),'&'===Sn.slice(-1)&&(Sn=Sn.slice(0,-1))),setTimeout(function(){y&&d.bind(window,'hashchange',c.onHashChange)},40)}},onHashChange:function(){return Un()===Sn?(An=!0,void c.close()):void(!kn&&(Tn=!0,c.goTo(Nn().pid),Tn=!1))},updateURL:function(){zn();Tn||(On?vn=setTimeout(Zn,800):Zn())}}}),d.extend(c,{shout:Le,listen:Re,viewportSize:_e,options:g,isMainScrollAnimating:function(){return ce},getZoomLevel:function(){return E},getCurrentIndex:function(){return b},isDragging:function(){return Q},isZooming:function(){return ae},setScrollOffset:function(e,t){Ee.x=e,K=Ee.y=t,Le('updateScrollOffset',Ee)},applyZoomPan:function(e,t,n,i){Ce.x=t,Ce.y=n,E=e,Ze(i)},init:function(){if(!(y||h)){var t;c.framework=d,c.template=e,c.bg=d.getChildByClass(e,'pswp__bg'),B=e.className,y=!0,q=d.detectFeatures(),Z=q.raf,M=q.caf,U=q.transform,W=q.oldIE,c.scrollWrap=d.getChildByClass(e,'pswp__scroll-wrap'),c.container=d.getChildByClass(c.scrollWrap,'pswp__container'),w=c.container.style,c.itemHolders=O=[{el:c.container.children[0],wrap:0,index:-1},{el:c.container.children[1],wrap:0,index:-1},{el:c.container.children[2],wrap:0,index:-1}],O[0].el.style.display=O[2].el.style.display='none',et(),v={resize:c.updateSize,orientationchange:function(){clearTimeout(G),G=setTimeout(function(){_e.x!==c.scrollWrap.clientWidth&&c.updateSize()},500)},scroll:it,keydown:tt,click:nt};var i=q.isOldIOSPhone||q.isOldAndroid||q.isMobileOpera;for(q.animationName&&q.transform&&!i||(g.showAnimationDuration=g.hideAnimationDuration=0),t=0;t<Pe.length;t++)c['init'+Pe[t]]();if(n){var l=c.ui=new n(c,d);l.init()}Le('firstUpdate'),b=b||g.index||0,(isNaN(b)||0>b||b>=on())&&(b=0),c.currItem=ln(b),(q.isOldIOSPhone||q.isOldAndroid)&&(Te=!1),e.setAttribute('aria-hidden','false'),g.modal&&(Te?e.style.position='fixed':(e.style.position='absolute',e.style.top=d.getScrollY()+'px')),void 0===K&&(Le('initialLayout'),K=H=d.getScrollY());var o='pswp--open ';for(g.mainClass&&(o+=g.mainClass+' '),g.showHideOpacity&&(o+='pswp--animate_opacity '),o+=N?'pswp--touch':'pswp--notouch',o+=q.animationName?' pswp--css_animation':'',o+=q.svg?' pswp--svg':'',d.addClass(e,o),c.updateSize(),x=-1,ke=null,t=0;t<u;t++)Be((t+x)*Ie.x,O[t].el.style);W||d.bind(c.scrollWrap,_,c),Re('initialZoomInEnd',function(){c.setContent(O[0],b-1),c.setContent(O[2],b+1),O[0].el.style.display=O[2].el.style.display='block',g.focus&&e.focus(),Ve()}),c.setContent(O[1],b),c.updateCurrItem(),Le('afterInit'),Te||(P=setInterval(function(){ot||Q||ae||E!==c.currItem.initialZoomLevel||c.updateSize()},1e3)),d.addClass(e,'pswp--visible')}},close:function(){y&&(y=!1,h=!0,Le('close'),Xe(),rn(c.currItem,null,!0,c.destroy))},destroy:function(){Le('destroy'),Qt&&clearTimeout(Qt),e.setAttribute('aria-hidden','true'),e.className=B,P&&clearInterval(P),d.unbind(c.scrollWrap,_,c),d.unbind(window,'scroll',c),St(),st(),Fe=null},panTo:function(e,t,n){n||(e>de.min.x?e=de.min.x:e<de.max.x&&(e=de.max.x),t>de.min.y?t=de.min.y:t<de.max.y&&(t=de.max.y)),Ce.x=e,Ce.y=t,Ze()},handleEvent:function(t){t=t||window.event,v[t.type]&&v[t.type](t)},goTo:function(e){e=De(e);var t=e-b;ke=t,b=e,c.currItem=ln(b),ve-=t,He(Ie.x*ve),st(),ce=!1,c.updateCurrItem()},next:function(){c.goTo(b+1)},prev:function(){c.goTo(b-1)},updateCurrZoomItem:function(e){if(e&&Le('beforeChange',0),O[1].el.children.length){var t=O[1].el.children[0];pe=d.hasClass(t,'pswp__zoom-wrap')?t.style:null}else pe=null;de=c.currItem.bounds,I=E=c.currItem.initialZoomLevel,Ce.x=de.center.x,Ce.y=de.center.y,e&&Le('afterChange')},invalidateCurrItems:function(){S=!0;for(var e=0;e<u;e++)O[e].item&&(O[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ke){var t,n=a(ke);if(!(e&&2>n)){c.currItem=ln(b),Oe=!1,Le('beforeChange',ke),n>=u&&(x+=ke+(0<ke?-u:u),n=u);for(var l=0;l<n;l++)0<ke?(t=O.shift(),O[u-1]=t,x++,Be((x+2)*Ie.x,t.el.style),c.setContent(t,b-n+l+1+1)):(t=O.pop(),O.unshift(t),x--,Be(x*Ie.x,t.el.style),c.setContent(t,b+n-l-1-1));if(pe&&1===a(ke)){var i=ln(A);i.initialZoomLevel!==E&&(un(i,_e),fn(i),Me(i))}ke=0,c.updateCurrZoomItem(),A=b,Le('afterChange')}}},updateSize:function(n){if(!Te&&g.modal){var l=d.getScrollY();if(K!==l&&(e.style.top=l+'px',K=l),!n&&Se.x===window.innerWidth&&Se.y===window.innerHeight)return;Se.x=window.innerWidth,Se.y=window.innerHeight,e.style.height=Se.y+'px'}if(_e.x=c.scrollWrap.clientWidth,_e.y=c.scrollWrap.clientHeight,it(),Ie.x=_e.x+t(_e.x*g.spacing),Ie.y=_e.y,He(Ie.x*ve),Le('beforeResize'),void 0!==x){for(var o,a,r,s=0;s<u;s++)o=O[s],Be((s+x)*Ie.x,o.el.style),r=b+s-1,g.loop&&2<on()&&(r=De(r)),a=ln(r),a&&(S||a.needsUpdate||!a.bounds)?(c.cleanSlide(a),c.setContent(o,r),1===s&&(c.currItem=a,c.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===o.index&&0<=r&&c.setContent(o,r),a&&a.container&&(un(a,_e),fn(a),Me(a));S=!1}I=E=c.currItem.initialZoomLevel,de=c.currItem.bounds,de&&(Ce.x=de.center.x,Ce.y=de.center.y,Ze(!0)),Le('resize')},zoomTo:function(e,t,n,i,l){t&&(I=E,Et.x=a(t.x)-Ce.x,Et.y=a(t.y)-Ce.y,Ke(we,Ce));var o=je(e,!1),r={};Qe('x',o,r,e),Qe('y',o,r,e);var s=E,p={x:Ce.x,y:Ce.y};qe(r);var c=function(t){1===t?(E=e,Ce.x=r.x,Ce.y=r.y):(E=(e-s)*t+s,Ce.x=(r.x-p.x)*t+p.x,Ce.y=(r.y-p.y)*t+p.y),l&&l(t),Ze(1===t)};n?dt('customZoomTo',0,1,n,i||d.easing.sine.inOut,c):c(1)}})}})},function(e,n,i){var l,o;(function(t,a){l=a,o='function'==typeof l?l.call(n,i,n,e):l,!(o!==void 0&&(e.exports=o))})(this,function(){'use strict';return function(n,l){var i,o,e,a,r,s,d,p,c,m,u,g,y,h,f,b,x,w,C=this,_=!1,v=!0,E=!0,I={barsSize:{top:44,bottom:'auto'},closeElClasses:['item','caption','zoom-wrap','ui','top-bar'],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML='',!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:'facebook',label:'Share on Facebook',url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},{id:'twitter',label:'Tweet',url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},{id:'pinterest',label:'Pin it',url:'http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}'},{id:'download',label:'Download image',url:'{{raw_image_url}}',download:!0}],getImageURLForShare:function(){return n.currItem.src||''},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return n.currItem.title||''},indexIndicatorSep:' / ',fitControlsWidth:1200},k=function(t){if(b)return!0;t=t||window.event,f.timeToIdle&&f.mouseUsed&&!c&&U();for(var e,n,o=t.target||t.srcElement,a=o.getAttribute('class')||'',r=0;r<K.length;r++)e=K[r],e.onTap&&-1<a.indexOf('pswp__'+e.name)&&(e.onTap(),n=!0);if(n){t.stopPropagation&&t.stopPropagation(),b=!0;var i=l.features.isOldAndroid?600:30;setTimeout(function(){b=!1},i)}},T=function(){return!n.likelyTouchDevice||f.mouseUsed||screen.width>f.fitControlsWidth},P=function(e,t,n){l[(n?'add':'remove')+'Class'](e,'pswp__'+t)},S=function(){var e=1===f.getNumItemsFn();e!==h&&(P(o,'ui--one-slide',e),h=e)},O=function(){P(d,'share-modal--hidden',E)},A=function(){return E=!E,E?(l.removeClass(d,'pswp__share-modal--fade-in'),setTimeout(function(){E&&O()},300)):(O(),setTimeout(function(){E||l.addClass(d,'pswp__share-modal--fade-in')},30)),E||F(),!1},D=function(i){i=i||window.event;var e=i.target||i.srcElement;return(n.shout('shareLinkClick',i,e),!!e.href)&&(!!e.hasAttribute('download')||(window.open(e.href,'pswp_share','scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left='+(window.screen?t(screen.width/2-275):100)),E||A(),!1))},F=function(){for(var e,t,n,l,o,a='',r=0;r<f.shareButtons.length;r++)e=f.shareButtons[r],n=f.getImageURLForShare(e),l=f.getPageURLForShare(e),o=f.getTextForShare(e),t=e.url.replace('{{url}}',encodeURIComponent(l)).replace('{{image_url}}',encodeURIComponent(n)).replace('{{raw_image_url}}',n).replace('{{text}}',encodeURIComponent(o)),a+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?'download':'')+'>'+e.label+'</a>',f.parseShareButtonOut&&(a=f.parseShareButtonOut(e,a));d.children[0].innerHTML=a,d.children[0].onclick=D},R=function(e){for(var t=0;t<f.closeElClasses.length;t++)if(l.hasClass(e,'pswp__'+f.closeElClasses[t]))return!0},L=0,U=function(){clearTimeout(w),L=0,c&&C.setIdle(!1)},z=function(t){t=t?t:window.event;var e=t.relatedTarget||t.toElement;e&&'HTML'!==e.nodeName||(clearTimeout(w),w=setTimeout(function(){C.setIdle(!0)},f.timeToIdleOutside))},N=function(){f.fullscreenEl&&!l.features.isOldAndroid&&(!i&&(i=C.getFullscreenAPI()),i?(l.bind(document,i.eventK,C.updateFullscreen),C.updateFullscreen(),l.addClass(n.template,'pswp--supports-fs')):l.removeClass(n.template,'pswp--supports-fs'))},Z=function(){f.preloaderEl&&(M(!0),m('beforeChange',function(){clearTimeout(y),y=setTimeout(function(){n.currItem&&n.currItem.loading?(!n.allowProgressiveImg()||n.currItem.img&&!n.currItem.img.naturalWidth)&&M(!1):M(!0)},f.loadingIndicatorDelay)}),m('imageLoadComplete',function(e,t){n.currItem===t&&M(!0)}))},M=function(e){g!==e&&(P(u,'preloader--active',!e),g=e)},B=function(t){var n=t.vGap;if(T()){var i=f.barsSize;if(!(f.captionEl&&'auto'===i.bottom))n.bottom='auto'===i.bottom?0:i.bottom;else if(a||(a=l.createEl('pswp__caption pswp__caption--fake'),a.appendChild(l.createEl('pswp__caption__center')),o.insertBefore(a,e),l.addClass(o,'pswp__ui--fit')),f.addCaptionHTMLFn(t,a,!0)){var r=a.clientHeight;n.bottom=parseInt(r,10)||44}else n.bottom=i.top;n.top=i.top}else n.top=n.bottom=0},H=function(){f.timeToIdle&&m('mouseUsed',function(){l.bind(document,'mousemove',U),l.bind(document,'mouseout',z),x=setInterval(function(){L++,2==L&&C.setIdle(!0)},f.timeToIdle/2)})},W=function(){m('onVerticalDrag',function(e){v&&0.95>e?C.hideControls():!v&&0.95<=e&&C.showControls()});var e;m('onPinchClose',function(t){v&&0.9>t?(C.hideControls(),e=!0):e&&!v&&0.9<t&&C.showControls()}),m('zoomGestureEnded',function(){e=!1,e&&!v&&C.showControls()})},K=[{name:'caption',option:'captionEl',onInit:function(t){e=t}},{name:'share-modal',option:'shareEl',onInit:function(e){d=e},onTap:function(){A()}},{name:'button--share',option:'shareEl',onInit:function(e){s=e},onTap:function(){A()}},{name:'button--zoom',option:'zoomEl',onTap:n.toggleDesktopZoom},{name:'counter',option:'counterEl',onInit:function(e){r=e}},{name:'button--close',option:'closeEl',onTap:n.close},{name:'button--arrow--left',option:'arrowEl',onTap:n.prev},{name:'button--arrow--right',option:'arrowEl',onTap:n.next},{name:'button--fs',option:'fullscreenEl',onTap:function(){i.isFullscreen()?i.exit():i.enter()}},{name:'preloader',option:'preloaderEl',onInit:function(e){u=e}}],q=function(){var e,t,n,i=function(o){if(o)for(var r=o.length,s=0;s<r;s++){e=o[s],t=e.className;for(var i=0;i<K.length;i++)n=K[i],-1<t.indexOf('pswp__'+n.name)&&(f[n.option]?(l.removeClass(e,'pswp__element--disabled'),n.onInit&&n.onInit(e)):l.addClass(e,'pswp__element--disabled'))}};i(o.children);var a=l.getChildByClass(o,'pswp__top-bar');a&&i(a.children)};C.init=function(){l.extend(n.options,I,!0),f=n.options,o=l.getChildByClass(n.scrollWrap,'pswp__ui'),m=n.listen,W(),m('beforeChange',C.update),m('doubleTap',function(e){var t=n.currItem.initialZoomLevel;n.getZoomLevel()===t?n.zoomTo(f.getDoubleTapZoom(!1,n.currItem),e,333):n.zoomTo(t,e,333)}),m('preventDragEvent',function(n,e,i){var l=n.target||n.srcElement;l&&l.getAttribute('class')&&-1<n.type.indexOf('mouse')&&(0<l.getAttribute('class').indexOf('__caption')||/(SMALL|STRONG|EM)/i.test(l.tagName))&&(i.prevent=!1)}),m('bindEvents',function(){l.bind(o,'pswpTap click',k),l.bind(n.scrollWrap,'pswpTap',C.onGlobalTap),n.likelyTouchDevice||l.bind(n.scrollWrap,'mouseover',C.onMouseOver)}),m('unbindEvents',function(){E||A(),x&&clearInterval(x),l.unbind(document,'mouseout',z),l.unbind(document,'mousemove',U),l.unbind(o,'pswpTap click',k),l.unbind(n.scrollWrap,'pswpTap',C.onGlobalTap),l.unbind(n.scrollWrap,'mouseover',C.onMouseOver),i&&(l.unbind(document,i.eventK,C.updateFullscreen),i.isFullscreen()&&(f.hideAnimationDuration=0,i.exit()),i=null)}),m('destroy',function(){f.captionEl&&(a&&o.removeChild(a),l.removeClass(e,'pswp__caption--empty')),d&&(d.children[0].onclick=null),l.removeClass(o,'pswp__ui--over-close'),l.addClass(o,'pswp__ui--hidden'),C.setIdle(!1)}),f.showAnimationDuration||l.removeClass(o,'pswp__ui--hidden'),m('initialZoomIn',function(){f.showAnimationDuration&&l.removeClass(o,'pswp__ui--hidden')}),m('initialZoomOut',function(){l.addClass(o,'pswp__ui--hidden')}),m('parseVerticalMargin',B),q(),f.shareEl&&s&&d&&(E=!0),S(),H(),N(),Z()},C.setIdle=function(e){c=e,P(o,'ui--idle',e)},C.update=function(){v&&n.currItem?(C.updateIndexIndicator(),f.captionEl&&(f.addCaptionHTMLFn(n.currItem,e),P(e,'caption--empty',!n.currItem.title)),_=!0):_=!1,E||A(),S()},C.updateFullscreen=function(t){t&&setTimeout(function(){n.setScrollOffset(0,l.getScrollY())},50),l[(i.isFullscreen()?'add':'remove')+'Class'](n.template,'pswp--fs')},C.updateIndexIndicator=function(){f.counterEl&&(r.innerHTML=n.getCurrentIndex()+1+f.indexIndicatorSep+f.getNumItemsFn())},C.onGlobalTap=function(t){t=t||window.event;var e=t.target||t.srcElement;if(!b)if(t.detail&&'mouse'===t.detail.pointerType){if(R(e))return void n.close();l.hasClass(e,'pswp__img')&&(1===n.getZoomLevel()&&n.getZoomLevel()<=n.currItem.fitRatio?f.clickToCloseNonZoomable&&n.close():n.toggleDesktopZoom(t.detail.releasePoint))}else if(f.tapToToggleControls&&(v?C.hideControls():C.showControls()),f.tapToClose&&(l.hasClass(e,'pswp__img')||R(e)))return void n.close()},C.onMouseOver=function(t){t=t||window.event;var e=t.target||t.srcElement;P(o,'ui--over-close',R(e))},C.hideControls=function(){l.addClass(o,'pswp__ui--hidden'),v=!1},C.showControls=function(){v=!0,_||C.update(),l.removeClass(o,'pswp__ui--hidden')},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var e,t=document.documentElement,i='fullscreenchange';return t.requestFullscreen?e={enterK:'requestFullscreen',exitK:'exitFullscreen',elementK:'fullscreenElement',eventK:i}:t.mozRequestFullScreen?e={enterK:'mozRequestFullScreen',exitK:'mozCancelFullScreen',elementK:'mozFullScreenElement',eventK:'moz'+i}:t.webkitRequestFullscreen?e={enterK:'webkitRequestFullscreen',exitK:'webkitExitFullscreen',elementK:'webkitFullscreenElement',eventK:'webkit'+i}:t.msRequestFullscreen&&(e={enterK:'msRequestFullscreen',exitK:'msExitFullscreen',elementK:'msFullscreenElement',eventK:'MSFullscreenChange'}),e&&(e.enter=function(){return p=f.closeOnScroll,f.closeOnScroll=!1,'webkitRequestFullscreen'===this.enterK?void n.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):n.template[this.enterK]()},e.exit=function(){return f.closeOnScroll=p,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=n(0),l=function(){function e(e){this._collection=null,this._filters=[],this.gallery=e}return e.prototype.addFilter=function(e){this.filters.push(e)},e.prototype.refresh=function(){this.filters.forEach(function(e){e.render()})},e.prototype.render=function(){var e=document.createElement('div');i.Utility.addClass(e,'natural-gallery-images sectionContainer'),e.appendChild(i.Utility.getIcon('icon-pict'));var t=document.createElement('div');i.Utility.addClass(t,'sectionName'),t.textContent=this.gallery.options.labelImages,e.appendChild(t);var n=document.createElement('span');e.appendChild(n),i.Utility.addClass(n,'natural-gallery-visible');var l=document.createElement('span');l.textContent='/',e.appendChild(l);var o=document.createElement('span');return i.Utility.addClass(o,'natural-gallery-total'),e.appendChild(o),this.element=document.createElement('div'),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),i.Utility.addClass(this.element,'natural-gallery-header'),this.element.appendChild(e),this.element},e.prototype.isFiltered=function(){return null!==this.collection},e.prototype.filter=function(){var e=null;this.filters.forEach(function(t){t.isActive()&&(null==e?e=t.collection:e=i.Utility.intersectionBy(e,t.collection,'id'))}),this.collection=e,this.gallery.refresh()},Object.defineProperty(e.prototype,'collection',{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'element',{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'gallery',{get:function(){return this._gallery},set:function(e){this._gallery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'filters',{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),e}();t.Header=l},function(e,t,n){'use strict';var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var l=n(0),o=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=document.createElement('div');l.Utility.addClass(e,'natural-gallery-searchTerm sectionContainer'),e.appendChild(l.Utility.getIcon('icon-search')),e.appendChild(this.getInput());var t=document.createElement('label');l.Utility.addClass(t,'sectionName'),t.textContent=this.header.gallery.options.labelSearch,e.appendChild(t);var n=document.createElement('span');return l.Utility.addClass(n,'bar'),e.appendChild(n),e},t.prototype.getInput=function(){var e=this,t=document.createElement('input');return t.setAttribute('required',''),t.addEventListener('keyup',function(t){var n=this;27===t.keyCode&&(n.value=''),e.filter(n.value)}),t},t.prototype.filter=function(e){this.collection=null;var t=l.Utility.removeDiacritics(e).toLowerCase();0<t.length&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(e){var n=l.Utility.removeDiacritics(e.title+' '+(e.description?e.description:'')).toLowerCase();-1!==n.search(t)&&this.collection.push(e)},this)),this.header.filter()},t}(o.AbstractFilter);t.SearchFilter=a},function(e,t,n){'use strict';var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var l=n(1),o=n(12),a=n(0),r=function(e){function t(t){var n=e.call(this,t)||this;return n.header=t,n._categories=[],n}return i(t,e),Object.defineProperty(t.prototype,'element',{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),t.prototype.render=function(){if(this.prepare(),!this.element){this.element=document.createElement('div'),a.Utility.addClass(this.element,'natural-gallery-categories sectionContainer');var e=document.createElement('div');a.Utility.addClass(e,'sectionName'),e.textContent=this.header.gallery.options.labelCategories,this.element.appendChild(e)}else for(var t=this.element.getElementsByTagName('label'),n=t.length-1;0<n;n--)this.element.removeChild(t.item(n));var i=this.element.getElementsByTagName('label')[0];return i&&i.parentNode.removeChild(i),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element},t.prototype.prepare=function(){var e=[];this.header.gallery.categories.forEach(function(t){e.push(new o.Category(t.id,t.title,this))},this),this.none=new o.Category(-1,this.header.gallery.options.labelNone,this),this.others=new o.Category(-2,this.header.gallery.options.labelOthers,this),this.header.gallery.options.showNone&&e.length&&e.push(this.none),this.header.gallery.options.showOthers&&e.length&&e.push(this.others);var t=[];this.header.gallery.getOriginalCollection().forEach(function(n){(!n.categories||n.categories&&0===n.categories.length&&this.header.gallery.options.showNone)&&(n.categories=[this.none]),e.length&&a.Utility.differenceBy(n.categories,e,'id').length===n.categories.length&&this.header.gallery.options.showOthers&&(n.categories=[this.others]),n.categories.forEach(function(e){t.push(new o.Category(e.id,e.title,this))},this)},this),e=a.Utility.uniqBy(e,'id'),t=a.Utility.uniqBy(t,'id'),this.categories=e.length?a.Utility.intersectionBy(e,t,'id'):t},t.prototype.filter=function(){var e=this.categories.filter(function(e){return e.isActive});if(e.length===this.categories.length)this.collection=null;else if(0===e.length)this.collection=[];else{var t=[];this.header.gallery.getOriginalCollection().forEach(function(n){!n.categories||n.categories&&0===n.categories.length?this.none&&t.push(n):n.categories.some(function(i){var l=e.some(function(e){return i.id===e.id});if(l)return t.push(n),!0})},this),this.collection=t}this.header.filter()},Object.defineProperty(t.prototype,'categories',{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'others',{get:function(){return this._others},set:function(e){this._others=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'none',{get:function(){return this._none},set:function(e){this._none=e},enumerable:!0,configurable:!0}),t}(l.AbstractFilter);t.CategoryFilter=r},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=n(0),l=function(){function e(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}return e.prototype.render=function(){var e=this;this.element=document.createElement('label');var t=document.createElement('input');t.setAttribute('type','checkbox'),t.setAttribute('checked','checked'),t.addEventListener('change',function(){e.isActive=!e.isActive,e.filter.filter()}),this.element.appendChild(t);var n=document.createElement('span');n.textContent=this.title;var l=document.createElement('span');i.Utility.addClass(l,'label'),l.appendChild(i.Utility.getIcon('icon-category')),l.appendChild(n),this.element.appendChild(l);var o=document.createElement('span');return i.Utility.addClass(o,'bar'),this.element.appendChild(o),this.element},Object.defineProperty(e.prototype,'id',{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'title',{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'isActive',{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'element',{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),e}();t.Category=l},function(n,i){'use strict';Object.defineProperty(i,'__esModule',{value:!0});var l;(function(n){n.organize=function(e){'natural'===e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):'square'===e.options.format&&e.options.imagesPerRow?this.organizeSquareByImagesPerRow(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin):'square'===e.options.format&&e.options.rowHeight&&this.organizeSquareByRowHeight(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin),e.style()},n.organizeSquareByRowHeight=function(n,l,o,a){a||(a=0);for(var r,s=Math.ceil((l+a)/(o+a)),d=t((l+a-s*a)/s),p=l-s*d-(s-1)*a,c=0;c<n.length;c++)r=n[c],r.last=c%s==s-1,r.row=e(c/s),r.width=e(d),r.height=e(d),r.last&&(r.width=e(d+p))},n.organizeSquareByImagesPerRow=function(t,n,l,o){o||(o=0),l||(l=4);for(var a,r=(n-(l-1)*o)/l,s=0;s<t.length;s++)a=t[s],a.width=e(r),a.height=e(r),a.last=s%l==l-1,a.row=e(s/l)},n.organizeNatural=function(e,t,n,i,l){void 0===l&&(l=null),l||(l=0),i||(i=0),n||(n=300);for(var o=1;o<=e.length;o++){var a=e.slice(0,o),r=this.getRowWidth(n,i,a);if(r>=t){this.computeSizes(a,t,i,l),this.organizeNatural(e.slice(o),t,n,i,l+1);break}else if(o===e.length){this.computeSizes(a,null,i,l,n);break}}},n.computeSizes=function(n,l,o,a,r){void 0===r&&(r=null);for(var s=l?this.getRowHeight(l,o,n):r,d=this.getRowWidth(s,o,n),p=l?this.apportionExcess(n,l,d):0,c=0,m=0;m<n.length;m++){var i=n[m],u=this.getImageRatio(i)*s-p;c+=u-e(u),u=e(u),(1<=c||m===n.length-1&&1===t(c))&&(u++,c--),i.width=u,i.height=e(s),i.row=a,i.last=m===n.length-1}},n.getRowWidth=function(e,t,n){return t*(n.length-1)+this.getRatios(n)*e},n.getRowHeight=function(e,t,n){return e/this.getRatios(n)+t*(n.length-1)},n.getRatios=function(e){for(var t=this,n=0,l=0;l<e.length;l++)n+=t.getImageRatio(e[l]);return n},n.getImageRatio=function(e){return+e.tWidth/+e.tHeight},n.apportionExcess=function(e,t,n){var i=(n-t)/e.length;return i}})(l=i.Organizer||(i.Organizer={}))}])});