{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b0fe0ba6afafb17a115a","webpack:///./app/js/Utility.ts","webpack:///./app/js/filter/AbstractFilter.ts","webpack:///./app/full.ts","webpack:///./app/styles/themes/natural.css","webpack:///./app/styles/natural-gallery.full.scss?4013","webpack:///./app/js/Gallery.ts","webpack:///./app/js/Item.ts","webpack:///./app/js/filter/Header.ts","webpack:///./app/js/filter/SearchFilter.ts","webpack:///./app/js/filter/CategoryFilter.ts","webpack:///./app/js/filter/Category.ts","webpack:///./app/js/Organizer.ts"],"names":[],"mappings":"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","file":"natural-gallery.full.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"NaturalGallery\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NaturalGallery\"] = factory();\n\telse\n\t\troot[\"NaturalGallery\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b0fe0ba6afafb17a115a","export module Utility {\n\n    export function getIcon(name: string): SVGSVGElement {\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('viewBox', '0 0 100 100');\n        svg.innerHTML = '<use xlink:href=\"#' + name + '\"></use>';\n        return svg;\n    }\n\n    export function toggleClass(element: Element, className) {\n\n        if (!element || !className) {\n            return;\n        }\n\n        if (!this.hasClass(element, className)) {\n            this.addClass(element, className);\n        } else {\n            this.removeClass(element, className);\n        }\n    }\n\n    export function removeClass(element: Element, className) {\n        const reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n        element.className = element.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    }\n\n    export function addClass(element: Element, className) {\n        if (!this.hasClass(className)) {\n            element.className += (element.className ? ' ' : '') + className;\n        }\n    }\n\n    export function hasClass(el, className) {\n        return el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n    }\n\n    export function uniqBy(collection, attr: string) {\n\n        const newCollection = [];\n\n        collection.forEach(function(item) {\n            const found = newCollection.some(function(el) {\n                return item[attr] === el[attr];\n            });\n\n            if (!found) {\n                newCollection.push(item);\n            }\n        });\n\n        return newCollection;\n    }\n\n    export function differenceBy(col1: any[], col2: any[], attr: string) {\n        const collection = [];\n\n        col1.forEach(function(el1) {\n            const found = col2.some(function(el2) {\n                return el1[attr] === el2[attr];\n            });\n\n            if (!found) {\n                collection.push(el1);\n            }\n        });\n\n        return collection;\n    }\n\n    export function intersectionBy(col1: any[], col2: any[], attr: string) {\n        const collection = [];\n\n        col1.forEach(function(el1) {\n            const found = col2.some(function(el2) {\n                return el1[attr] === el2[attr];\n            });\n            if (found) {\n                collection.push(el1);\n            }\n        });\n\n        return collection;\n    }\n\n    // Source = http://web.archive.org/web/20120918093154/http://lehelk.com/2011/05/06/script-to-remove-diacritics/\n    const defaultDiacriticsRemovalMap = [\n        {\n            'base': 'A',\n            'letters': /[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F]/g\n        },\n        {\n            'base': 'AA',\n            'letters': /[\\uA732]/g\n        },\n        {\n            'base': 'AE',\n            'letters': /[\\u00C6\\u01FC\\u01E2]/g\n        },\n        {\n            'base': 'AO',\n            'letters': /[\\uA734]/g\n        },\n        {\n            'base': 'AU',\n            'letters': /[\\uA736]/g\n        },\n        {\n            'base': 'AV',\n            'letters': /[\\uA738\\uA73A]/g\n        },\n        {\n            'base': 'AY',\n            'letters': /[\\uA73C]/g\n        },\n        {\n            'base': 'B',\n            'letters': /[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181]/g\n        },\n        {\n            'base': 'C',\n            'letters': /[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E]/g\n        },\n        {\n            'base': 'D',\n            'letters': /[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779]/g\n        },\n        {\n            'base': 'DZ',\n            'letters': /[\\u01F1\\u01C4]/g\n        },\n        {\n            'base': 'Dz',\n            'letters': /[\\u01F2\\u01C5]/g\n        },\n        {\n            'base': 'E',\n            'letters': /[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E]/g\n        },\n        {\n            'base': 'F',\n            'letters': /[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B]/g\n        },\n        {\n            'base': 'G',\n            'letters': /[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E]/g\n        },\n        {\n            'base': 'H',\n            'letters': /[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D]/g\n        },\n        {\n            'base': 'I',\n            'letters': /[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197]/g\n        },\n        {\n            'base': 'J',\n            'letters': /[\\u004A\\u24BF\\uFF2A\\u0134\\u0248]/g\n        },\n        {\n            'base': 'K',\n            'letters': /[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2]/g\n        },\n        {\n            'base': 'L',\n            'letters': /[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780]/g\n        },\n        {\n            'base': 'LJ',\n            'letters': /[\\u01C7]/g\n        },\n        {\n            'base': 'Lj',\n            'letters': /[\\u01C8]/g\n        },\n        {\n            'base': 'M',\n            'letters': /[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C]/g\n        },\n        {\n            'base': 'N',\n            'letters': /[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4]/g\n        },\n        {\n            'base': 'NJ',\n            'letters': /[\\u01CA]/g\n        },\n        {\n            'base': 'Nj',\n            'letters': /[\\u01CB]/g\n        },\n        {\n            'base': 'O',\n            'letters': /[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C]/g\n        },\n        {\n            'base': 'OI',\n            'letters': /[\\u01A2]/g\n        },\n        {\n            'base': 'OO',\n            'letters': /[\\uA74E]/g\n        },\n        {\n            'base': 'OU',\n            'letters': /[\\u0222]/g\n        },\n        {\n            'base': 'P',\n            'letters': /[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754]/g\n        },\n        {\n            'base': 'Q',\n            'letters': /[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A]/g\n        },\n        {\n            'base': 'R',\n            'letters': /[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782]/g\n        },\n        {\n            'base': 'S',\n            'letters': /[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784]/g\n        },\n        {\n            'base': 'T',\n            'letters': /[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786]/g\n        },\n        {\n            'base': 'TZ',\n            'letters': /[\\uA728]/g\n        },\n        {\n            'base': 'U',\n            'letters': /[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244]/g\n        },\n        {\n            'base': 'V',\n            'letters': /[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245]/g\n        },\n        {\n            'base': 'VY',\n            'letters': /[\\uA760]/g\n        },\n        {\n            'base': 'W',\n            'letters': /[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72]/g\n        },\n        {\n            'base': 'X',\n            'letters': /[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C]/g\n        },\n        {\n            'base': 'Y',\n            'letters': /[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE]/g\n        },\n        {\n            'base': 'Z',\n            'letters': /[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762]/g\n        },\n        {\n            'base': 'a',\n            'letters': /[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250]/g\n        },\n        {\n            'base': 'aa',\n            'letters': /[\\uA733]/g\n        },\n        {\n            'base': 'ae',\n            'letters': /[\\u00E6\\u01FD\\u01E3]/g\n        },\n        {\n            'base': 'ao',\n            'letters': /[\\uA735]/g\n        },\n        {\n            'base': 'au',\n            'letters': /[\\uA737]/g\n        },\n        {\n            'base': 'av',\n            'letters': /[\\uA739\\uA73B]/g\n        },\n        {\n            'base': 'ay',\n            'letters': /[\\uA73D]/g\n        },\n        {\n            'base': 'b',\n            'letters': /[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253]/g\n        },\n        {\n            'base': 'c',\n            'letters': /[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184]/g\n        },\n        {\n            'base': 'd',\n            'letters': /[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A]/g\n        },\n        {\n            'base': 'dz',\n            'letters': /[\\u01F3\\u01C6]/g\n        },\n        {\n            'base': 'e',\n            'letters': /[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD]/g\n        },\n        {\n            'base': 'f',\n            'letters': /[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C]/g\n        },\n        {\n            'base': 'g',\n            'letters': /[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F]/g\n        },\n        {\n            'base': 'h',\n            'letters': /[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265]/g\n        },\n        {\n            'base': 'hv',\n            'letters': /[\\u0195]/g\n        },\n        {\n            'base': 'i',\n            'letters': /[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131]/g\n        },\n        {\n            'base': 'j',\n            'letters': /[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249]/g\n        },\n        {\n            'base': 'k',\n            'letters': /[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3]/g\n        },\n        {\n            'base': 'l',\n            'letters': /[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747]/g\n        },\n        {\n            'base': 'lj',\n            'letters': /[\\u01C9]/g\n        },\n        {\n            'base': 'm',\n            'letters': /[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F]/g\n        },\n        {\n            'base': 'n',\n            'letters': /[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5]/g\n        },\n        {\n            'base': 'nj',\n            'letters': /[\\u01CC]/g\n        },\n        {\n            'base': 'o',\n            'letters': /[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275]/g\n        },\n        {\n            'base': 'oi',\n            'letters': /[\\u01A3]/g\n        },\n        {\n            'base': 'ou',\n            'letters': /[\\u0223]/g\n        },\n        {\n            'base': 'oo',\n            'letters': /[\\uA74F]/g\n        },\n        {\n            'base': 'p',\n            'letters': /[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755]/g\n        },\n        {\n            'base': 'q',\n            'letters': /[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759]/g\n        },\n        {\n            'base': 'r',\n            'letters': /[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783]/g\n        },\n        {\n            'base': 's',\n            'letters': /[\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B]/g\n        },\n        {\n            'base': 't',\n            'letters': /[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787]/g\n        },\n        {\n            'base': 'tz',\n            'letters': /[\\uA729]/g\n        },\n        {\n            'base': 'u',\n            'letters': /[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289]/g\n        },\n        {\n            'base': 'v',\n            'letters': /[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C]/g\n        },\n        {\n            'base': 'vy',\n            'letters': /[\\uA761]/g\n        },\n        {\n            'base': 'w',\n            'letters': /[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73]/g\n        },\n        {\n            'base': 'x',\n            'letters': /[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D]/g\n        },\n        {\n            'base': 'y',\n            'letters': /[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF]/g\n        },\n        {\n            'base': 'z',\n            'letters': /[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763]/g\n        }\n    ];\n\n    export function removeDiacritics(str) {\n        for (var i = 0; i < defaultDiacriticsRemovalMap.length; i++) {\n            str = str.replace(defaultDiacriticsRemovalMap[i].letters, defaultDiacriticsRemovalMap[i].base);\n        }\n        return str;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/Utility.ts","import {Item} from '../Item';\nimport {Header} from './Header';\n\nexport abstract class AbstractFilter {\n\n    /**\n     * If null, means no filter active\n     * If empty, means filter active, but no results\n     * If not empty, means filter active, and there are wanted items\n     * @type {null}\n     * @private\n     */\n    protected _collection: Item[] = null;\n\n    public constructor(protected header: Header) {\n    }\n\n    public abstract render(): HTMLElement;\n\n    public abstract filter(value?: string): void;\n\n    public isActive(): boolean {\n        return this.collection !== null;\n    }\n\n    get collection(): Item[] {\n        return this._collection;\n    }\n\n    set collection(value: Item[]) {\n        this._collection = value;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/filter/AbstractFilter.ts","import './styles/themes/natural.css';\nimport './styles/natural-gallery.full.scss';\nexport * from './js/Gallery';\n\n\n\n// WEBPACK FOOTER //\n// ./app/full.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/styles/themes/natural.css\n// module id = 3\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/styles/natural-gallery.full.scss\n// module id = 4\n// module chunks = 0","import { IItemFields, Item } from './Item';\nimport { Header } from './filter/Header';\nimport { Category } from './filter/Category';\nimport { SearchFilter } from './filter/SearchFilter';\nimport { CategoryFilter } from './filter/CategoryFilter';\nimport { Utility } from './Utility';\nimport { Organizer } from './Organizer';\n\nexport interface IGalleryOptions {\n    rowHeight: number;\n    format: string;\n    round: number;\n    imagesPerRow?: number;\n    margin: number;\n    limit: number;\n    showLabels: string;\n    lightbox: boolean;\n    minRowsAtStart: number;\n    showCount: boolean;\n    searchFilter: boolean;\n    categoriesFilter: boolean;\n    showNone: boolean;\n    showOthers: boolean;\n    labelCategories: string;\n    labelNone: string;\n    labelOthers: string;\n    labelSearch: string;\n    labelImages: string;\n}\n\nexport class Gallery {\n\n    /**\n     * Default options\n     */\n    private _options: IGalleryOptions = {\n        rowHeight: 350,\n        format: 'natural',\n        round: 3,\n        margin: 3,\n        limit: 0,\n        showLabels: 'hover',\n        lightbox: true,\n        minRowsAtStart: 2,\n        showCount: false,\n        searchFilter: false,\n        categoriesFilter: false,\n        showNone: false,\n        showOthers: false,\n        labelCategories: 'Category',\n        labelNone: 'None',\n        labelOthers: 'Others',\n        labelSearch: 'Search',\n        labelImages: 'Images',\n    };\n\n    /**\n     * Used to test the scroll direction\n     * Avoid to load more images when scrolling up in the detection zone\n     * @type {number}\n     */\n    private old_scroll_top = 0;\n\n    private _id: string;\n\n    /**\n     * Root div containing the gallery\n     */\n    private _rootElement: HTMLElement;\n\n    /**\n     * Images wrapper container\n     */\n    private _bodyElement: HTMLElement;\n\n    /**\n     * Last saved wrapper width\n     */\n    private _bodyWidth: number;\n\n    /**\n     * Photoswipe images container\n     * @type {Array}\n     */\n    private _pswpContainer: any[] = [];\n\n    /**\n     * Photoswipe dom element\n     */\n    private _pswpElement: HTMLElement;\n\n    /**\n     * Photoswipe javascript object\n     * Contains api to interact with library\n     * @type PhotoSwipe\n     */\n    private _pswpApi: any;\n\n    /**\n     * Complete collection of images\n     * @type {Array}\n     */\n    private _collection: Item[] = [];\n    private _categories: any[] = [];\n\n    private _header: Header;\n\n    /**\n     * Initiate gallery\n     * @param element\n     * @param pswp\n     * @param data\n     */\n    public constructor(element: HTMLElement, pswp: HTMLElement, data) {\n        this.pswpElement = pswp;\n\n        // Complete options with default values\n        for (const key in this.options) {\n            if (typeof data.options[key] === 'undefined') {\n                data.options[key] = this.options[key];\n            }\n        }\n\n        this.options = data.options;\n        this.categories = data.categories ? <Category[]> data.categories : [];\n        this.rootElement = element;\n        Utility.addClass(this.rootElement, 'natural-gallery');\n\n        // header\n        if (this.options.searchFilter || this.options.categoriesFilter || this.options.showCount) {\n\n            this.header = new Header(this);\n\n            if (this.options.searchFilter) {\n                this.header.addFilter(new SearchFilter(this.header));\n            }\n\n            if (this.options.categoriesFilter) {\n                this.header.addFilter(new CategoryFilter(this.header));\n            }\n        }\n\n        this.render();\n        this.bodyWidth = Math.floor(this.bodyElement.getBoundingClientRect().width);\n\n        if (data.images) {\n            this.collection = data.images;\n        }\n\n        if (this.options.limit === 0) {\n            this.bindScroll();\n        }\n\n    }\n\n    public render() {\n\n        const self = this;\n\n        let noResults = document.createElement('div');\n        Utility.addClass(noResults, 'natural-gallery-noresults');\n        noResults.appendChild(Utility.getIcon('icon-noresults'));\n\n        let nextButton = document.createElement('div');\n        Utility.addClass(nextButton, 'natural-gallery-next');\n        nextButton.appendChild(Utility.getIcon('icon-next'));\n        nextButton.addEventListener('click', function(e) {\n            e.preventDefault();\n            self.addElements();\n        });\n\n        // Add iframe at root level that launches a resize when width change\n        let iframe = document.createElement('iframe');\n        iframe.addEventListener('load', function() {\n            let timer = null;\n\n            this.contentWindow.addEventListener('resize', function() {\n                clearTimeout(timer);\n                timer = setTimeout(function() {\n                    self.resize();\n                }, 100);\n            });\n        });\n\n        this.bodyElement = document.createElement('div');\n        Utility.addClass(this.bodyElement, 'natural-gallery-body');\n        this.bodyElement.appendChild(noResults);\n\n        if (this.header) {\n            this.rootElement.appendChild(this.header.render());\n        }\n\n        this.rootElement.appendChild(this.bodyElement);\n        this.rootElement.appendChild(nextButton);\n        this.rootElement.appendChild(iframe);\n\n    }\n\n    /**\n     * Initialize items\n     * @param items\n     */\n    public appendItems(items): void {\n\n        let display = false;\n\n        // if it's first addition of items, display them\n        if (this.collection.length === 0) {\n            display = true;\n        }\n\n        // Complete collection\n        items.forEach(function(item) {\n            item.id = this._collection.length;\n            this._collection.push(new Item(<IItemFields> item, this));\n        }, this);\n\n        // Compute sizes\n        Organizer.organize(this);\n\n        if (this.header) {\n            this.header.refresh();\n        }\n\n        if (display) {\n            this.addElements();\n        }\n    }\n\n    public style(): void {\n        this.collection.forEach(function(item: Item) {\n            item.style();\n        });\n    }\n\n    /**\n     * Add a number of rows to DOM container, and to Photoswipe gallery.\n     * If rows are not given, is uses backoffice data or compute according to browser size\n     * @param gallery target\n     * @param rows\n     */\n    public addElements(rows: number = null): void {\n\n        let collection = this.collection;\n\n        // display because filters may add more images and we have to show it again\n        let nextButton = <HTMLElement> this.rootElement.getElementsByClassName('natural-gallery-next')[0];\n        if (nextButton) {\n            nextButton.style.display = 'block';\n        }\n\n        if (this.pswpContainer.length === collection.length) {\n            nextButton.style.display = 'none';\n\n            if (collection.length === 0) {\n                (<HTMLElement> this.rootElement.getElementsByClassName('natural-gallery-noresults')[0]).style.display = 'block';\n                (<HTMLElement> this.rootElement.getElementsByClassName('natural-gallery-images')[0]).style.display = 'none';\n            }\n\n            return;\n        }\n\n        if (!rows) {\n            rows = this.getRowsPerPage(this);\n        }\n\n        let nextImage = this.pswpContainer.length;\n        let lastRow = this.pswpContainer.length ? collection[nextImage].row + rows : rows;\n\n        // Select next elements, comparing their rows\n        for (let i = nextImage; i < collection.length; i++) {\n            let item = collection[i];\n            if (item.row < lastRow) {\n                this.pswpContainer.push(item.getPswpItem());\n                this.bodyElement.appendChild(item.loadElement());\n                item.bindClick();\n                item.flash();\n            }\n\n            // Show / Hide \"more\" button.\n            if (this.pswpContainer.length === collection.length) {\n                nextButton.style.display = 'none';\n            }\n        }\n\n        let noResults = (<HTMLElement> this.rootElement.getElementsByClassName('natural-gallery-noresults')[0]);\n        if (noResults) {\n            noResults.style.display = 'none';\n        }\n\n        let imageContainer = (<HTMLElement> this.rootElement.getElementsByClassName('natural-gallery-images')[0]);\n        if (imageContainer) {\n            imageContainer.style.display = 'block';\n        }\n\n        let galleryVisible = this.rootElement.getElementsByClassName('natural-gallery-visible')[0];\n        if (galleryVisible) {\n            galleryVisible.textContent = String(this.pswpContainer.length);\n        }\n\n        let galleryTotal = this.rootElement.getElementsByClassName('natural-gallery-total')[0];\n        if (galleryTotal) {\n            galleryTotal.textContent = String(collection.length);\n        }\n    }\n\n    /**\n     * Return number of rows to show per page,\n     * If a number of rows are specified in the backoffice, this data is used.\n     * If not specified, uses the vertical available space to compute the number of rows to display.\n     * There is a letiable in the header of this file to specify the  minimum number of rows for the computation (minNumberOfRowsAtStart)\n     * @param gallery\n     * @returns {*}\n     */\n    private getRowsPerPage(gallery) {\n\n        if (this.options.limit) {\n            return this.options.limit;\n        }\n\n        let winHeight = window.outerHeight;\n        let galleryVisibleHeight = winHeight - gallery.bodyElement.offsetTop;\n        // ratio to be more close from reality average row height\n        let nbRows = Math.floor(galleryVisibleHeight / (this.options.rowHeight * 0.7));\n\n        return nbRows < this.options.minRowsAtStart ? this.options.minRowsAtStart : nbRows;\n    }\n\n    /**\n     * Check whetever we need to resize a gallery (only if parent container width changes)\n     * The keep full rows, it recomputes sizes with new dimension, and reset everything, then add the same number of row.\n     * It results in not partial row.\n     */\n    public resize() {\n\n        let containerWidth = Math.floor(this.bodyElement.getBoundingClientRect().width);\n\n        if (containerWidth !== this.bodyWidth) {\n            this.bodyWidth = containerWidth;\n\n            Organizer.organize(this);\n\n            let nbRows = this.collection[this.pswpContainer.length - 1].row + 1;\n            this.reset();\n            this.addElements(nbRows);\n        }\n    }\n\n    public refresh() {\n        this.reset();\n        Organizer.organize(this);\n        this.addElements();\n    }\n\n    /**\n     * Empty DOM container and PhotoSwipe container\n     */\n    public reset(): void {\n        this.pswpContainer = [];\n\n        this._collection.forEach(function(item: Item) {\n            item.remove();\n        });\n\n        let results = <HTMLElement> this.rootElement.getElementsByClassName('natural-gallery-noresults')[0];\n        if (results) {\n            results.style.display = 'none';\n        }\n    }\n\n    private bindScroll() {\n\n        document.addEventListener('scroll', () => {\n            let endOfGalleryAt = this.rootElement.offsetTop + this.rootElement.offsetHeight + 60;\n\n            // Avoid to expand gallery if we are scrolling up\n            let current_scroll_top = (window.pageYOffset || document.documentElement.scrollTop) - (document.documentElement.clientTop || 0);\n            let window_size = window.innerHeight;\n\n            let scroll_delta = current_scroll_top - this.old_scroll_top;\n            this.old_scroll_top = current_scroll_top;\n\n            // \"enableMoreLoading\" is a setting coming from the BE bloking / enabling dynamic loading of thumbnail\n            if (scroll_delta > 0 && current_scroll_top + window_size > endOfGalleryAt) {\n                // When scrolling only add a row at once\n                this.addElements(1);\n            }\n        });\n    }\n\n    /**\n     * Pseudo attribute, works like a \"post-add-images\".\n     * If gallery config has .images attribute specified before gallery object creation,\n     * the constructor will deal with .images attribute to create the official collection\n     * If user specifies .images attribute after library load, this function will take care of it.\n     * For post load, user needs to keep reference to this object.\n     * @param images\n     */\n    set images(images) {\n        this.collection = images;\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    set id(value: string) {\n        this._id = value;\n    }\n\n    get pswpContainer(): any[] {\n        return this._pswpContainer;\n    }\n\n    set pswpContainer(value: any[]) {\n        this._pswpContainer = value;\n    }\n\n    get collection(): Item[] {\n        return this.header && this.header.isFiltered() ? this.header.collection : this._collection;\n    }\n\n    public getOriginalCollection(): Item[] {\n        return this._collection;\n    }\n\n    set collection(items: Item[]) {\n        this._collection = [];\n        this.appendItems(items);\n    }\n\n    get bodyWidth(): number {\n        return this._bodyWidth;\n    }\n\n    set bodyWidth(value: number) {\n        this._bodyWidth = value;\n    }\n\n    get bodyElement(): HTMLElement {\n        return this._bodyElement;\n    }\n\n    set bodyElement(value: HTMLElement) {\n        this._bodyElement = value;\n    }\n\n    get rootElement(): HTMLElement {\n        return this._rootElement;\n    }\n\n    set rootElement(value: HTMLElement) {\n        this._rootElement = value;\n    }\n\n    get pswpApi(): any {\n        return this._pswpApi;\n    }\n\n    set pswpApi(value: any) {\n        this._pswpApi = value;\n    }\n\n    get pswpElement(): HTMLElement {\n        return this._pswpElement;\n    }\n\n    set pswpElement(value: HTMLElement) {\n        this._pswpElement = value;\n    }\n\n    get options(): IGalleryOptions {\n        return this._options;\n    }\n\n    set options(value: IGalleryOptions) {\n        this._options = value;\n    }\n\n    get header(): Header {\n        return this._header;\n    }\n\n    set header(value: Header) {\n        this._header = value;\n    }\n\n    get categories(): any[] {\n        return this._categories;\n    }\n\n    set categories(value: any[]) {\n        this._categories = value;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/Gallery.ts","import {Gallery} from './Gallery';\nimport {Utility} from './Utility';\n// import * as PhotoSwipe from 'photoswipe';\n// import * as PhotoSwipeUI_Default from 'photoswipe/dist/photoswipe-ui-default';\n\nexport interface IItemFields {\n    id?: number;\n    thumbnail: string;\n    enlarged: string;\n    title: string;\n    description: string;\n    link: string;\n    linkTarget: string;\n    tWidth: number;\n    tHeight: number;\n    eWidth: number;\n    eHeight: number;\n    last: boolean;\n    categories?: any[];\n}\n\nexport class Item {\n\n    private _id: number;\n    private _thumbnail: string;\n    private _enlarged: string;\n    private _title: string;\n    private _description: string;\n    private _link: string;\n    private _linkTarget: string;\n    private _last: boolean;\n    private _categories: any[];\n    private _row: number;\n    private _binded: boolean = false;\n\n    /**\n     * Computed size (real used size)\n     */\n    private _width: number;\n    private _height: number;\n\n    /**\n     * Thumbnail size\n     */\n    private _tWidth: number;\n    private _tHeight: number;\n\n    /**\n     * Enlarged width\n     */\n    private _eWidth: number;\n    private _eHeight: number;\n\n    /**\n     * Dom elements\n     */\n    private element: HTMLElement;\n    private image: HTMLElement;\n\n    /**\n     * @param fields\n     * @param gallery\n     */\n    public constructor(private fields: IItemFields, private gallery: Gallery) {\n\n        this.id = fields.id;\n        this.thumbnail = fields.thumbnail;\n        this.enlarged = fields.enlarged;\n        this.title = this.getTitle(fields);\n        this.link = this.getLink(fields);\n        this.linkTarget = this.getLinkTarget(fields);\n        this.tWidth = fields.tWidth;\n        this.tHeight = fields.tHeight;\n        this.eWidth = fields.eWidth;\n        this.eHeight = fields.eHeight;\n        this.categories = fields.categories;\n        this.last = fields.last;\n\n        this.createElement();\n    }\n\n    private getTitle(fields): string {\n\n        if (!fields.title) {\n            return null;\n        }\n\n        return this.getTitleDetails(fields.title).title;\n    }\n\n    private getLink(fields): string {\n\n        if (fields.link) {\n            return fields.link;\n        }\n\n        return this.getTitleDetails(fields.title).link;\n    }\n\n    private getLinkTarget(fields): string {\n\n        if (fields.linkTarget) {\n            return fields.linkTarget;\n        }\n\n        return this.getTitleDetails(fields.title).linkTarget;\n    }\n\n    private getTitleDetails(title) {\n\n        let container = document.createElement('div');\n        container.innerHTML = title;\n        let links = container.getElementsByTagName('a');\n\n        let details = {\n            title: container.textContent,\n            link: null,\n            linkTarget: null\n        };\n\n        if (links[0]) {\n            details.link = links[0].getAttribute('href');\n            details.linkTarget = links[0].getAttribute('target');\n        }\n\n        return details;\n    }\n\n    /**\n     * Create DOM elements according to element raw data (thumbnail and enlarged urls)\n     * Also apply border-radius at this level because it never changed threw time\n     * @param element\n     * @param gallery\n     * @returns {{figure: (*|HTMLElement), image: *}}\n     */\n    private createElement() {\n\n        let options = this.gallery.options;\n\n        let label = null;\n        if (this.title && ['true', 'hover'].indexOf(options.showLabels) > -1) {\n            label = true;\n        }\n\n        let element = document.createElement('div');\n        let image = document.createElement('div');\n        let link = this.getLinkElement();\n\n        if (options.lightbox && label && link) {\n            label = link;\n            Utility.addClass(label, 'button');\n            Utility.addClass(image, 'zoomable');\n\n        } else if (options.lightbox && label && !link) {\n            label = document.createElement('div');\n            Utility.addClass(element, 'zoomable');\n\n        } else if (options.lightbox && !label) {\n            // Actually, lightbox has priority on the link that is ignored...\n            Utility.addClass(element, 'zoomable');\n\n        } else if (!options.lightbox && label && link) {\n            element = link;\n            label = document.createElement('div');\n\n        } else if (!options.lightbox && label && !link) {\n            label = document.createElement('div');\n\n        } else if (!options.lightbox && !label && link) {\n            element = link;\n            // Pointer cursor is shown, but additionnal effect could be even better.\n\n        }\n\n        Utility.addClass(image, 'image');\n        Utility.addClass(element, 'figure loading visible');\n        image.style.backgroundImage = 'url(' + this.thumbnail + ')';\n\n        element.appendChild(image);\n\n        if (options.round) {\n            let radius = String(options.round + 'px');\n            element.style.borderRadius = radius;\n            image.style.borderRadius = radius;\n        }\n\n        this.element = element;\n        this.image = image;\n\n        if (label) {\n            label.textContent = this.title;\n            Utility.addClass(label, 'title');\n            if (options.showLabels === 'hover') {\n                Utility.addClass(label, 'hover');\n            }\n            element.appendChild(label);\n        }\n\n    }\n\n    private getLinkElement() {\n        let link = null;\n\n        if (this.link) {\n            link = document.createElement('a');\n            link.setAttribute('href', this.link);\n            Utility.addClass(link, 'link');\n            if (this.linkTarget) {\n                link.setAttribute('target', this.linkTarget);\n            }\n        }\n\n        return link;\n    }\n\n    /**\n     * Use computed (organized) data to apply style (size and margin) to elements on DOM\n     * Does not apply border-radius because is used to restyle data on browser resize, and border-radius don't change.\n     * @param element\n     * @param gallery\n     */\n    public style() {\n\n        Utility.removeClass(this.element, 'visible');\n\n        this.element.style.width = String(this.width + 'px');\n        this.element.style.height = String(this.height + 'px');\n        this.element.style.marginRight = String(this.gallery.options.margin + 'px');\n        this.element.style.marginBottom = String(this.gallery.options.margin + 'px');\n\n        if (this.last) {\n            this.element.style.marginRight = '0';\n        }\n\n        this.image.style.width = String(this.width + 'px');\n        this.image.style.height = String(this.height + 'px');\n\n        const self = this;\n        window.setTimeout(\n            function() {\n                Utility.addClass(self.element, 'visible');\n            },\n            0);\n    }\n\n    public flash() {\n        const self = this;\n        Utility.removeClass(this.element, 'visible');\n        window.setTimeout(\n            function() {\n                Utility.addClass(self.element, 'visible');\n            },\n            0);\n    }\n\n    /**\n     * Open photoswipe gallery on click\n     * Add elements to gallery when navigating until last element\n     * @param image\n     * @param gallery\n     */\n    public bindClick() {\n\n        // if (!this.gallery.options.lightbox) {\n        //     return;\n        // }\n        //\n        // const self = this;\n        //\n        // // Avoid multiple bindings\n        // if (this.binded) {\n        //     return;\n        // }\n        //\n        // this.binded = true;\n        //\n        // let openPhotoSwipe = function(e) {\n        //     self.openPhotoSwipe.call(self, e, self.element);\n        // };\n        //\n        // let clickEl = null;\n        //\n        // if (this.link) {\n        //     clickEl = this.image;\n        // } else {\n        //     clickEl = this.element;\n        // }\n        //\n        // clickEl.addEventListener('click', openPhotoSwipe);\n    }\n\n    public openPhotoSwipe(e, el) {\n        // e.preventDefault();\n        //\n        // let self = this;\n        //\n        // if (!this.gallery.options.lightbox) {\n        //     return;\n        // }\n        //\n        // let nodeList = Array.prototype.slice.call((<HTMLElement> el.parentNode).children);\n        // let index = nodeList.indexOf(el) - 1;\n        //\n        // let options = {\n        //     index: index,\n        //     bgOpacity: 0.85,\n        //     showHideOpacity: true,\n        //     loop: false\n        // };\n        //\n        // let pswp = new PhotoSwipe(this.gallery.pswpElement, PhotoSwipeUI_Default, this.gallery.pswpContainer, options);\n        // this.gallery.pswpApi = pswp;\n        // pswp.init();\n        //\n        // let overrideLoop = null;\n        //\n        // // Loading one more page when going to next image\n        // pswp.listen('beforeChange', function(delta) {\n        //\n        //     // Positive delta indicates 'go to next' action, we don't load more objects on looping back the gallery (same logic when scrolling)\n        //     if (delta > 0 && pswp.getCurrentIndex() === pswp.items.length - 1) {\n        //         self.gallery.addElements();\n        //     } else if (delta === -1 * (pswp.items.length - 1)) {\n        //         overrideLoop = pswp.items.length;\n        //         self.gallery.addElements();\n        //     }\n        // });\n        //\n        // // After change cannot detect if we are returning back from last to first\n        // pswp.listen('afterChange', function() {\n        //     if (overrideLoop) {\n        //         pswp.goTo(overrideLoop);\n        //         overrideLoop = null;\n        //     }\n        // });\n    }\n\n    public getPswpItem() {\n        return {\n            src: this._enlarged,\n            w: this._eWidth,\n            h: this._eHeight,\n            title: this._title\n        };\n    }\n\n    public getElement(): HTMLElement {\n        return this.element;\n    }\n\n    /**\n     * This function prepare loaded/loading status and return root element.\n     * @returns {HTMLElement}\n     */\n    public loadElement(): HTMLElement {\n\n        const self = this;\n        let img = document.createElement('img');\n        img.setAttribute('src', this.thumbnail);\n\n        img.addEventListener('load', function() {\n            Utility.removeClass(self.element, 'loading');\n            Utility.addClass(self.element, 'loaded');\n        });\n\n        // Detect errored images and hide them smartly\n        img.addEventListener(\n            'error',\n            function() {\n                Utility.addClass(self.element, 'errored');\n            });\n\n        return this.element;\n    }\n\n    public remove() {\n        if (this.getElement().parentNode) {\n            this.getElement().parentNode.removeChild(this.getElement());\n        }\n    }\n\n    get id(): number {\n        return this._id;\n    }\n\n    set id(value: number) {\n        this._id = value;\n    }\n\n    get thumbnail(): string {\n        return this._thumbnail;\n    }\n\n    set thumbnail(value: string) {\n        this._thumbnail = value;\n    }\n\n    get enlarged(): string {\n        return this._enlarged;\n    }\n\n    set enlarged(value: string) {\n        this._enlarged = value;\n    }\n\n    get title(): string {\n        return this._title;\n    }\n\n    set title(value: string) {\n        this._title = value;\n    }\n\n    get tWidth(): number {\n        return this._tWidth;\n    }\n\n    set tWidth(value: number) {\n        this._tWidth = value;\n    }\n\n    get tHeight(): number {\n        return this._tHeight;\n    }\n\n    set tHeight(value: number) {\n        this._tHeight = value;\n    }\n\n    get eWidth(): number {\n        return this._eWidth;\n    }\n\n    set eWidth(value: number) {\n        this._eWidth = value;\n    }\n\n    get eHeight(): number {\n        return this._eHeight;\n    }\n\n    set eHeight(value: number) {\n        this._eHeight = value;\n    }\n\n    get last(): boolean {\n        return this._last;\n    }\n\n    set last(value: boolean) {\n        this._last = value;\n    }\n\n    get categories(): any[] {\n        return this._categories;\n    }\n\n    set categories(value: any[]) {\n        this._categories = value;\n    }\n\n    get row(): number {\n        return this._row;\n    }\n\n    set row(value: number) {\n        this._row = value;\n    }\n\n    get height(): number {\n        return this._height;\n    }\n\n    set height(value: number) {\n        this._height = value;\n    }\n\n    get width(): number {\n        return this._width;\n    }\n\n    set width(value: number) {\n        this._width = value;\n    }\n\n    get description(): string {\n        return this._description;\n    }\n\n    set description(value: string) {\n        this._description = value;\n    }\n\n    get binded(): boolean {\n        return this._binded;\n    }\n\n    set binded(value: boolean) {\n        this._binded = value;\n    }\n\n    get link(): string {\n        return this._link;\n    }\n\n    set link(value: string) {\n        this._link = value;\n    }\n\n    get linkTarget(): string {\n        return this._linkTarget;\n    }\n\n    set linkTarget(value: string) {\n        this._linkTarget = value;\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/Item.ts","import {Item} from '../Item';\nimport {AbstractFilter} from './AbstractFilter';\nimport {Gallery} from '../Gallery';\nimport {Utility} from '../Utility';\n\nexport class Header {\n\n    /**\n     * Complete collection of filtered elements\n     * Contains null or array\n     * Null means no selection is active\n     * Array means a selection is active, even if array is empty. Render empty\n     * @type {Array}\n     */\n    private _collection: Item[] = null;\n\n    private _element: Element;\n\n    private _filters: AbstractFilter[] = [];\n\n    private _gallery: Gallery;\n\n    /**\n     * CONSTRUCTOR\n     * @param gallery\n     */\n    public constructor(gallery: Gallery) {\n        this.gallery = gallery;\n\n    }\n\n    public addFilter(filter: AbstractFilter): void {\n        this.filters.push(filter);\n    }\n\n    public refresh(): void {\n        this.filters.forEach(function(filter) {\n            filter.render();\n        });\n    }\n\n    public render(): Element {\n\n        let imagesLayout = document.createElement('div');\n        Utility.addClass(imagesLayout, 'natural-gallery-images sectionContainer');\n        imagesLayout.appendChild(Utility.getIcon('icon-pict'));\n\n        let sectionName = document.createElement('div');\n        Utility.addClass(sectionName, 'sectionName');\n        sectionName.textContent = this.gallery.options.labelImages;\n        imagesLayout.appendChild(sectionName);\n\n        let galleryVisible = document.createElement('span');\n        imagesLayout.appendChild(galleryVisible);\n\n        Utility.addClass(galleryVisible, 'natural-gallery-visible');\n        let slash = document.createElement('span');\n        slash.textContent = '/';\n        imagesLayout.appendChild(slash);\n\n        let total = document.createElement('span');\n        Utility.addClass(total, 'natural-gallery-total');\n        imagesLayout.appendChild(total);\n\n        this.element = document.createElement('div');\n\n        this.filters.forEach(\n            function(filter) {\n                this.element.appendChild(filter.render());\n            },\n            this);\n\n        Utility.addClass(this.element, 'natural-gallery-header');\n        this.element.appendChild(imagesLayout);\n\n        return this.element;\n    }\n\n    public isFiltered(): boolean {\n        return this.collection !== null;\n    }\n\n    /**\n     * Filter first by term, then by categories\n     * @param gallery\n     */\n    public filter(): void {\n\n        let filteredCollections = null;\n\n        this.filters.forEach(function(filter: AbstractFilter) {\n            if (filter.isActive()) {\n                if (filteredCollections === null) {\n                    filteredCollections = filter.collection;\n                } else {\n                    filteredCollections = Utility.intersectionBy(filteredCollections, filter.collection, 'id');\n                }\n            }\n        });\n\n        this.collection = filteredCollections; // @todo : do some intelligent things here\n        this.gallery.refresh();\n    }\n\n    get collection(): Item[] {\n        return this._collection;\n    }\n\n    set collection(value: Item[]) {\n        this._collection = value;\n    }\n\n    get element(): Element {\n        return this._element;\n    }\n\n    set element(value: Element) {\n        this._element = value;\n    }\n\n    get gallery(): Gallery {\n        return this._gallery;\n    }\n\n    set gallery(value: Gallery) {\n        this._gallery = value;\n    }\n\n    get filters(): AbstractFilter[] {\n        return this._filters;\n    }\n\n    set filters(value: AbstractFilter[]) {\n        this._filters = value;\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/filter/Header.ts","import {Utility} from '../Utility';\nimport {AbstractFilter} from './AbstractFilter';\n\nexport class SearchFilter extends AbstractFilter {\n\n    public render(): HTMLElement {\n\n        let element = document.createElement('div');\n        Utility.addClass(element, 'natural-gallery-searchTerm sectionContainer');\n        element.appendChild(Utility.getIcon('icon-search'));\n        element.appendChild(this.getInput());\n\n        let label = document.createElement('label');\n        Utility.addClass(label, 'sectionName');\n        label.textContent = this.header.gallery.options.labelSearch;\n        element.appendChild(label);\n\n        let bar = document.createElement('span');\n        Utility.addClass(bar, 'bar');\n        element.appendChild(bar);\n\n        return element;\n    }\n\n    private getInput(): HTMLElement {\n\n        const self = this;\n\n        let input = document.createElement('input');\n        input.setAttribute('required', '');\n        input.addEventListener('keyup', function(event) {\n\n            let el = <HTMLInputElement> this;\n\n            // On escape key, empty field\n            if (event.keyCode === 27) {\n                el.value = '';\n            }\n\n            self.filter(el.value);\n        });\n\n        return input;\n    }\n\n    public filter(val: string): void {\n\n        this.collection = null; // set filter inactive\n\n        let term = Utility.removeDiacritics(val).toLowerCase();\n\n        if (term.length > 0) {\n\n            this.collection = []; // filter is active, and at least empty !\n            this.header.gallery.getOriginalCollection().forEach(\n                function(item) {\n                    let needle = Utility.removeDiacritics(item.title + ' ' + (item.description ? item.description : '')).toLowerCase();\n                    if (needle.search(term) !== -1) {\n                        this.collection.push(item);\n                    }\n                },\n                this);\n\n        }\n\n        this.header.filter();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/filter/SearchFilter.ts","import {AbstractFilter} from './AbstractFilter';\nimport {Category} from './Category';\nimport {Header} from './Header';\nimport {Utility} from '../Utility';\nimport {Item} from '../Item';\n\nexport class CategoryFilter extends AbstractFilter {\n\n    set element(value: HTMLElement) {\n        this._element = value;\n    }\n\n    private _categories: Category[] = [];\n\n    private _element: HTMLElement;\n\n    private _none: Category;\n    private _others: Category;\n\n    public constructor(protected header: Header) {\n        super(header);\n    }\n\n    public render(): HTMLElement {\n\n        this.prepare();\n\n        if (!this.element) {\n            this.element = document.createElement('div');\n            Utility.addClass(this.element, 'natural-gallery-categories sectionContainer');\n\n            let sectionName = document.createElement('div');\n            Utility.addClass(sectionName, 'sectionName');\n            sectionName.textContent = this.header.gallery.options.labelCategories;\n            this.element.appendChild(sectionName);\n        }\n\n        let label = this.element.getElementsByTagName('label')[0];\n        if (label) {\n            label.parentNode.removeChild(label);\n        }\n\n        this.categories.forEach(\n            function(cat: Category) {\n                this.element.appendChild(cat.render());\n            },\n            this);\n\n        return this.element;\n    }\n\n    public prepare(): void {\n\n        let galleryCategories = [];\n        this.header.gallery.categories.forEach(\n            function(cat) {\n                galleryCategories.push(new Category(cat.id, cat.title, this));\n            },\n            this);\n\n        this.none = new Category(-1, this.header.gallery.options.labelNone, this);\n        this.others = new Category(-2, this.header.gallery.options.labelOthers, this);\n\n        // If show unclassified\n        if (this.header.gallery.options.showNone && galleryCategories.length) {\n            galleryCategories.push(this.none);\n        }\n\n        // If show others and there are main categories\n        if (this.header.gallery.options.showOthers && galleryCategories.length) {\n            galleryCategories.push(this.others);\n        }\n\n        let itemCategories = [];\n        this.header.gallery.getOriginalCollection().forEach(\n            function(item: Item) {\n\n                // Set category \"none\" if empty\n                if (!item.categories || item.categories && item.categories.length === 0 && this.header.gallery.options.showNone) {\n                    item.categories = [this.none];\n                }\n\n                // Set category \"others\" if none of categories are used in gallery categories\n                if (galleryCategories.length\n                    && Utility.differenceBy(item.categories, galleryCategories, 'id').length\n                    === item.categories.length\n                    && this.header.gallery.options.showOthers\n                ) {\n                    item.categories = [this.others];\n                }\n\n                // Assign categories as object\n                item.categories.forEach(\n                    function(cat) {\n                        itemCategories.push(new Category(cat.id, cat.title, this));\n                    },\n                    this);\n\n            },\n            this);\n\n        // Avoid duplicates\n        galleryCategories = Utility.uniqBy(galleryCategories, 'id');\n        itemCategories = Utility.uniqBy(itemCategories, 'id');\n\n        if (galleryCategories.length) {\n            this.categories = Utility.intersectionBy(galleryCategories, itemCategories, 'id');\n        } else {\n            this.categories = itemCategories;\n        }\n\n    }\n\n    public filter(): void {\n\n        let selectedCategories = this.categories.filter(function(cat) {\n            return cat.isActive;\n        });\n\n        if (selectedCategories.length === this.categories.length) {\n            // if all categories are selected\n            this.collection = null;\n\n        } else if (selectedCategories.length === 0) {\n            // if no category is selected\n            this.collection = [];\n\n        } else {\n\n            let filteredItems = [];\n\n            this.header.gallery.getOriginalCollection().forEach(\n                function(item) {\n                    if (!item.categories || item.categories && item.categories.length === 0) {\n                        if (this.none) {\n                            filteredItems.push(item);\n                        }\n                    } else {\n                        item.categories.some(function(cat1: Category) {\n                            let found = selectedCategories.some(function(cat2: Category) {\n                                return cat1.id === cat2.id;\n                            });\n                            if (found) {\n                                filteredItems.push(item);\n                                return true;\n                            }\n                        });\n                    }\n                },\n                this);\n\n            this.collection = filteredItems;\n        }\n\n        this.header.filter();\n    }\n\n    get categories(): Category[] {\n        return this._categories;\n    }\n\n    set categories(value: Category[]) {\n        this._categories = value;\n    }\n\n    get others(): Category {\n        return this._others;\n    }\n\n    set others(value: Category) {\n        this._others = value;\n    }\n\n    get none(): Category {\n        return this._none;\n    }\n\n    set none(value: Category) {\n        this._none = value;\n    }\n\n    get element(): HTMLElement {\n        return this._element;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/filter/CategoryFilter.ts","import {Utility} from '../Utility';\nimport {AbstractFilter} from './AbstractFilter';\n\nexport class Category {\n\n    private _id: number;\n\n    private _title: string;\n\n    private _isActive: boolean = true;\n\n    private _element: HTMLElement;\n\n    public constructor(id: number, title: string, private filter?: AbstractFilter) {\n        this.id = id;\n        this.title = title;\n    }\n\n    public render(): HTMLElement {\n\n        const self = this;\n\n        this.element = document.createElement('label');\n        let input = document.createElement('input');\n        input.setAttribute('type', 'checkbox');\n        input.setAttribute('checked', 'checked');\n        input.addEventListener('change', function() {\n            self.isActive = !self.isActive;\n            self.filter.filter();\n        });\n\n        this.element.appendChild(input);\n\n        let title = document.createElement('span');\n        title.textContent = this.title;\n\n        let label = document.createElement('span');\n        Utility.addClass(label, 'label');\n        label.appendChild(Utility.getIcon('icon-category'));\n        label.appendChild(title);\n\n        this.element.appendChild(label);\n\n        let bar = document.createElement('span');\n        Utility.addClass(bar, 'bar');\n        this.element.appendChild(bar);\n\n        return this.element;\n    }\n\n    get id(): number {\n        return this._id;\n    }\n\n    set id(value: number) {\n        this._id = value;\n    }\n\n    get title(): string {\n        return this._title;\n    }\n\n    set title(value: string) {\n        this._title = value;\n    }\n\n    get isActive(): boolean {\n        return this._isActive;\n    }\n\n    set isActive(value: boolean) {\n        this._isActive = value;\n    }\n\n    get element(): HTMLElement {\n        return this._element;\n    }\n\n    set element(value: HTMLElement) {\n        this._element = value;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/filter/Category.ts","/**\n * Based on http://blog.vjeux.com/2012/image/image-layout-algorithm-google-plus.html\n *\n * First, compute the number of pictures per row, based on target height (maxRowHeight).\n * Then compute the final height according to full container inner width\n *\n * Uses json, never read the dom, except to determine the size of parent container.\n *\n */\nimport { Gallery } from './Gallery';\n\nexport module Organizer {\n\n    export function organize(gallery: Gallery) {\n\n        if (gallery.options.format === 'natural') {\n            this.organizeNatural(gallery.collection, gallery.bodyWidth, gallery.options.rowHeight, gallery.options.margin);\n        } else if (gallery.options.format === 'square' && gallery.options.imagesPerRow) {\n            this.organizeSquareByImagesPerRow(gallery.collection, gallery.bodyWidth, gallery.options.imagesPerRow, gallery.options.margin);\n        } else if (gallery.options.format === 'square' && gallery.options.rowHeight) {\n            this.organizeSquareByRowHeight(gallery.collection, gallery.bodyWidth, gallery.options.rowHeight, gallery.options.margin);\n        }\n\n        gallery.style();\n    }\n\n    /**\n     *\n     * @param elements\n     * @param containerWidth\n     * @param maxRowHeight\n     * @param margin\n     */\n    export function organizeSquareByRowHeight(elements, containerWidth, maxRowHeight, margin) {\n\n        if (!margin) {\n            margin = 0;\n        }\n\n        let nbPictPerRow = Math.ceil((containerWidth + margin) / (maxRowHeight + margin));\n\n        // Compute size of pictures\n        let size = Math.round((containerWidth + margin - nbPictPerRow * margin) / nbPictPerRow);\n\n        // Compute overflow of given images per row. This number affect the width of the last item of the row\n        let diff = containerWidth - nbPictPerRow * size - (nbPictPerRow - 1) * margin;\n\n        for (let i = 0; i < elements.length; i++) {\n            let element = elements[i];\n            element.last = i % nbPictPerRow === nbPictPerRow - 1;\n            element.row = Math.floor(i / nbPictPerRow);\n\n            element.width = Math.floor(size);\n            element.height = Math.floor(size);\n            if (element.last) {\n                element.width = Math.floor(size + diff);\n            }\n        }\n\n    }\n\n    /**\n     * Compute sizes for images with 1:1 ratio\n     * @param elements\n     * @param containerWidth\n     * @param nbPictPerRow\n     * @param margin\n     */\n    export function organizeSquareByImagesPerRow(elements, containerWidth, nbPictPerRow, margin) {\n\n        if (!margin) {\n            margin = 0;\n        }\n\n        if (!nbPictPerRow) {\n            nbPictPerRow = 4;\n        }\n\n        let size = (containerWidth - (nbPictPerRow - 1) * margin) / nbPictPerRow;\n\n        for (let i = 0; i < elements.length; i++) {\n            let element = elements[i];\n            element.width = Math.floor(size);\n            element.height = Math.floor(size);\n            element.last = i % nbPictPerRow === nbPictPerRow - 1;\n            element.row = Math.floor(i / nbPictPerRow);\n        }\n    }\n\n    /**\n     * Compute sizes for images that keep the most their native proportion\n     * @param elements\n     * @param containerWidth\n     * @param maxRowHeight\n     * @param margin\n     * @param row\n     */\n    export function organizeNatural(elements, containerWidth, maxRowHeight, margin, row = null) {\n\n        if (!row) {\n            row = 0;\n        }\n\n        if (!margin) {\n            margin = 0;\n        }\n\n        if (!maxRowHeight) {\n            maxRowHeight = 300; // Should match the default value of thumbnailMaximumHeight field from flexform\n        }\n\n        for (let chunkSize = 1; chunkSize <= elements.length; chunkSize++) {\n            let chunk = elements.slice(0, chunkSize);\n            let rowWidth = this.getRowWidth(maxRowHeight, margin, chunk);\n            if (rowWidth >= containerWidth) { // if end of row\n                this.computeSizes(chunk, containerWidth, margin, row);\n                this.organizeNatural(elements.slice(chunkSize), containerWidth, maxRowHeight, margin, row + 1);\n                break;\n            } else if (chunkSize === elements.length) { // if end of list\n                // the width is not fixed as we have not enough elements\n                // size of images are indexed on max row height.\n                this.computeSizes(chunk, null, margin, row, maxRowHeight);\n                break;\n            }\n        }\n    }\n\n    export function computeSizes(chunk, containerWidth, margin, row, maxRowHeight = null) {\n        let rowHeight = containerWidth ? this.getRowHeight(containerWidth, margin, chunk) : maxRowHeight;\n        let rowWidth = this.getRowWidth(rowHeight, margin, chunk);\n\n        let excess = containerWidth ? this.apportionExcess(chunk, containerWidth, rowWidth) : 0;\n        let decimals = 0;\n\n        for (let i = 0; i < chunk.length; i++) {\n            let element = chunk[i];\n            let width = this.getImageRatio(element) * rowHeight - excess;\n            decimals += width - Math.floor(width);\n            width = Math.floor(width);\n\n            if (decimals >= 1 || i === chunk.length - 1 && Math.round(decimals) === 1) {\n                width++;\n                decimals--;\n            }\n\n            element.width = width;\n            element.height = Math.floor(rowHeight);\n            element.row = row;\n            element.last = i === chunk.length - 1;\n        }\n    }\n\n    export function getRowWidth(maxRowHeight, margin, elements) {\n        return margin * (elements.length - 1) + this.getRatios(elements) * maxRowHeight;\n    }\n\n    export function getRowHeight(containerWidth, margin, elements) {\n        return containerWidth / this.getRatios(elements) + margin * (elements.length - 1);\n    }\n\n    export function getRatios(elements) {\n\n        const self = this;\n        let totalWidth = 0;\n\n        for (let i = 0; i < elements.length; i++) {\n            totalWidth += self.getImageRatio(elements[i]);\n        }\n\n        return totalWidth;\n    }\n\n    export function getImageRatio(el) {\n        return Number(el.tWidth) / Number(el.tHeight);\n    }\n\n    export function apportionExcess(elements, containerWidth, rowWidth) {\n        let excess = rowWidth - containerWidth;\n        let excessPerItem = excess / elements.length;\n        return excessPerItem;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/Organizer.ts"],"sourceRoot":""}